(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["app~fa1e48bf"],{

/***/ "iVgR":
/*!**********************************!*\
  !*** ./src/gameCode/BaseGame.js ***!
  \**********************************/
/*! exports provided: setupIgor */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"setupIgor\", function() { return setupIgor; });\n/* harmony import */ var IgorJs_main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! IgorJs/main */ \"7jDb\");\n/* harmony import */ var Config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! Config */ \"463H\");\n/* harmony import */ var gameCode_PlayerWorkshop__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! gameCode/PlayerWorkshop */ \"Kh/G\");\n/* harmony import */ var gameCode_GameObjects__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! gameCode/GameObjects */ \"iVpH\");\n/* harmony import */ var gameCode_inventory_Igor__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! gameCode/inventory_Igor */ \"uH5N\");\n/* harmony import */ var gameCode_FactoryBlocks__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! gameCode/FactoryBlocks */ \"v3/l\");\n\n\n\n\n\n //* these two setup the base game data,\n// possibly combine them to a single function\n//\n\nvar newGame = {\n  land: {\n    total: 100,\n    used: 0,\n    complexity: 0,\n    res_patches: 1,\n    res_patches_used: 0,\n    fac_block_costs: {\n      factory: 100,\n      bus: 100,\n      research: 100\n    }\n  },\n  scanning: {\n    nextCost: 100,\n    currentCost: 0\n  },\n  attackWaves: {\n    nextTimer: 100,\n    nextStrength: 100,\n    currentTimer: 0\n  },\n  facBlocks: {\n    defenses: null,\n    defenseBus: null,\n    offense: null,\n    offenseBus: null,\n    resBlocks: [],\n    buses: [],\n    blocks: [],\n    techBlocks: []\n  },\n  player: gameCode_PlayerWorkshop__WEBPACK_IMPORTED_MODULE_2__[\"newPlayer\"],\n  activeFeatures: {\n    tutorial: true\n  },\n  research: {\n    completed: {},\n    progressing: null\n  },\n  unlocked_recipes: [],\n  version: Config__WEBPACK_IMPORTED_MODULE_1__[\"IDB_SAVE_VERSION\"]\n};\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"#\", newGame); //* This sets up the references Igor needs to run\n\nvar setupIgor = function setupIgor() {} //TODO rebuild Igor's object list,\n// but ideally it happens automatically \n// when loading game object descriptions\n//IgorJs.defineObj(\"#.facBlocks\", \"factoryBlocksBase\")\n//IgorJs.defineObj(\"player\", \"player\")\n//IgorJs.amendObject(\"FactoryBlocksBase\", {tickFn: (td, obj) => { tickBase(td, obj) } })\n//console.log('setup complete')\n\n/*\r\n//SMELL\r\n//This should be split among the individual objects,\r\n// and probably moved to Function() calls\r\nconst tickBase = (tickData, facBlocks) => {\r\n    if(tickData.ticks%100) { return }\r\n    if(facBlocks?.offenses?.machines.radar?.count) {\r\n      this.globals.scanning.currentCost += facBlocks.offenses.machines.radar.count * 1\r\n      if(this.globals.scanning.currentCost>=this.globals.scanning.nextCost) {\r\n        this.globals.scanning.currentCost -= this.globals.scanning.nextCost\r\n        this.globals.scanning.nextCost += 20\r\n        //NYI generate land /resource patch and enemies\r\n        this.globals.land.total += 10\r\n        this.globals.land.res_patches = Math.floor(this.globals.land.total/100)\r\n\r\n      }\r\n    }\r\n    if(facBlocks?.defenses?.machines.turret?.count) {\r\n      //next wave\r\n      if(this.globals.attackWaves.currentTimer>this.globals.attackWaves.nextTimer) {\r\n        this.globals.attackWaves.nextTimer = this.globals.attackWaves.nextTimer ^ 1.2\r\n        this.globals.attackWaves.currentTime = 0\r\n        //Process some attack\r\n      } else {\r\n        this.globals.attackWaves.currentTimer++\r\n      }\r\n    }\r\n}\r\n*/\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaVZnUi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9nYW1lQ29kZS9CYXNlR2FtZS5qcz84OTU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SWdvclV0aWxzIGFzIElnb3JKc30gZnJvbSBcIklnb3JKcy9tYWluXCJcclxuaW1wb3J0ICogYXMgQ09ORklHIGZyb20gJ0NvbmZpZydcclxuXHJcbmltcG9ydCAqIGFzIFBsYXllcldvcmtzaG9wIGZyb20gJ2dhbWVDb2RlL1BsYXllcldvcmtzaG9wJ1xyXG5pbXBvcnQgKiBhcyBPYmplY3RzU291cmNlIGZyb20gJ2dhbWVDb2RlL0dhbWVPYmplY3RzJ1xyXG5pbXBvcnQgKiBhcyBJbnZlbnRvcnlJZ29yIGZyb20gJ2dhbWVDb2RlL2ludmVudG9yeV9JZ29yJ1xyXG5pbXBvcnQgKiBhcyBGYWN0b3J5QmxvY2tzIGZyb20gJ2dhbWVDb2RlL0ZhY3RvcnlCbG9ja3MnXHJcblxyXG5cclxuLy8qIHRoZXNlIHR3byBzZXR1cCB0aGUgYmFzZSBnYW1lIGRhdGEsXHJcbi8vIHBvc3NpYmx5IGNvbWJpbmUgdGhlbSB0byBhIHNpbmdsZSBmdW5jdGlvblxyXG4vL1xyXG5jb25zdCBuZXdHYW1lID0ge1xyXG4gICAgbGFuZDoge1xyXG4gICAgICB0b3RhbDogMTAwLFxyXG4gICAgICB1c2VkOiAwLFxyXG4gICAgICBjb21wbGV4aXR5OiAwLFxyXG4gICAgICByZXNfcGF0Y2hlczogMSxcclxuICAgICAgcmVzX3BhdGNoZXNfdXNlZDogMCxcclxuICAgICAgZmFjX2Jsb2NrX2Nvc3RzOiB7XHJcbiAgICAgICAgZmFjdG9yeTogMTAwLFxyXG4gICAgICAgIGJ1czogMTAwLFxyXG4gICAgICAgIHJlc2VhcmNoOiAxMDAsXHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzY2FubmluZzoge1xyXG4gICAgICBuZXh0Q29zdDogMTAwLFxyXG4gICAgICBjdXJyZW50Q29zdDogMFxyXG4gICAgfSxcclxuICAgIGF0dGFja1dhdmVzOiB7XHJcbiAgICAgIG5leHRUaW1lcjogMTAwLFxyXG4gICAgICBuZXh0U3RyZW5ndGg6IDEwMCxcclxuICAgICAgY3VycmVudFRpbWVyOiAwLFxyXG4gICAgfSxcclxuICAgIGZhY0Jsb2Nrczoge1xyXG4gICAgICBkZWZlbnNlczogbnVsbCxcclxuICAgICAgZGVmZW5zZUJ1czogbnVsbCxcclxuICAgICAgb2ZmZW5zZTogbnVsbCxcclxuICAgICAgb2ZmZW5zZUJ1czogbnVsbCxcclxuICAgICAgcmVzQmxvY2tzOiBbXSxcclxuICAgICAgYnVzZXM6IFtdLFxyXG4gICAgICBibG9ja3M6IFtdLFxyXG4gICAgICB0ZWNoQmxvY2tzOiBbXVxyXG4gICAgfSxcclxuICAgIHBsYXllcjogUGxheWVyV29ya3Nob3AubmV3UGxheWVyLFxyXG4gICAgYWN0aXZlRmVhdHVyZXM6IHtcclxuICAgICAgdHV0b3JpYWw6IHRydWVcclxuICAgIH0sXHJcbiAgICByZXNlYXJjaDogeyBjb21wbGV0ZWQ6IHt9LCBwcm9ncmVzc2luZzogbnVsbCB9LFxyXG4gICAgdW5sb2NrZWRfcmVjaXBlczogW10sXHJcbiAgICB2ZXJzaW9uOiBDT05GSUcuSURCX1NBVkVfVkVSU0lPTlxyXG59XHJcbklnb3JKcy5kZWZpbmVPYmooXCIjXCIsIG5ld0dhbWUpXHJcblxyXG5cclxuLy8qIFRoaXMgc2V0cyB1cCB0aGUgcmVmZXJlbmNlcyBJZ29yIG5lZWRzIHRvIHJ1blxyXG5leHBvcnQgY29uc3Qgc2V0dXBJZ29yID0gKCkgPT4ge1xyXG4gIC8vVE9ETyByZWJ1aWxkIElnb3IncyBvYmplY3QgbGlzdCxcclxuICAvLyBidXQgaWRlYWxseSBpdCBoYXBwZW5zIGF1dG9tYXRpY2FsbHkgXHJcbiAgLy8gd2hlbiBsb2FkaW5nIGdhbWUgb2JqZWN0IGRlc2NyaXB0aW9uc1xyXG4gIC8vSWdvckpzLmRlZmluZU9iaihcIiMuZmFjQmxvY2tzXCIsIFwiZmFjdG9yeUJsb2Nrc0Jhc2VcIilcclxuICAvL0lnb3JKcy5kZWZpbmVPYmooXCJwbGF5ZXJcIiwgXCJwbGF5ZXJcIilcclxuICAvL0lnb3JKcy5hbWVuZE9iamVjdChcIkZhY3RvcnlCbG9ja3NCYXNlXCIsIHt0aWNrRm46ICh0ZCwgb2JqKSA9PiB7IHRpY2tCYXNlKHRkLCBvYmopIH0gfSlcclxuICAvL2NvbnNvbGUubG9nKCdzZXR1cCBjb21wbGV0ZScpXHJcbn1cclxuXHJcbi8qXHJcbi8vU01FTExcclxuLy9UaGlzIHNob3VsZCBiZSBzcGxpdCBhbW9uZyB0aGUgaW5kaXZpZHVhbCBvYmplY3RzLFxyXG4vLyBhbmQgcHJvYmFibHkgbW92ZWQgdG8gRnVuY3Rpb24oKSBjYWxsc1xyXG5jb25zdCB0aWNrQmFzZSA9ICh0aWNrRGF0YSwgZmFjQmxvY2tzKSA9PiB7XHJcbiAgICBpZih0aWNrRGF0YS50aWNrcyUxMDApIHsgcmV0dXJuIH1cclxuICAgIGlmKGZhY0Jsb2Nrcz8ub2ZmZW5zZXM/Lm1hY2hpbmVzLnJhZGFyPy5jb3VudCkge1xyXG4gICAgICB0aGlzLmdsb2JhbHMuc2Nhbm5pbmcuY3VycmVudENvc3QgKz0gZmFjQmxvY2tzLm9mZmVuc2VzLm1hY2hpbmVzLnJhZGFyLmNvdW50ICogMVxyXG4gICAgICBpZih0aGlzLmdsb2JhbHMuc2Nhbm5pbmcuY3VycmVudENvc3Q+PXRoaXMuZ2xvYmFscy5zY2FubmluZy5uZXh0Q29zdCkge1xyXG4gICAgICAgIHRoaXMuZ2xvYmFscy5zY2FubmluZy5jdXJyZW50Q29zdCAtPSB0aGlzLmdsb2JhbHMuc2Nhbm5pbmcubmV4dENvc3RcclxuICAgICAgICB0aGlzLmdsb2JhbHMuc2Nhbm5pbmcubmV4dENvc3QgKz0gMjBcclxuICAgICAgICAvL05ZSSBnZW5lcmF0ZSBsYW5kIC9yZXNvdXJjZSBwYXRjaCBhbmQgZW5lbWllc1xyXG4gICAgICAgIHRoaXMuZ2xvYmFscy5sYW5kLnRvdGFsICs9IDEwXHJcbiAgICAgICAgdGhpcy5nbG9iYWxzLmxhbmQucmVzX3BhdGNoZXMgPSBNYXRoLmZsb29yKHRoaXMuZ2xvYmFscy5sYW5kLnRvdGFsLzEwMClcclxuXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKGZhY0Jsb2Nrcz8uZGVmZW5zZXM/Lm1hY2hpbmVzLnR1cnJldD8uY291bnQpIHtcclxuICAgICAgLy9uZXh0IHdhdmVcclxuICAgICAgaWYodGhpcy5nbG9iYWxzLmF0dGFja1dhdmVzLmN1cnJlbnRUaW1lcj50aGlzLmdsb2JhbHMuYXR0YWNrV2F2ZXMubmV4dFRpbWVyKSB7XHJcbiAgICAgICAgdGhpcy5nbG9iYWxzLmF0dGFja1dhdmVzLm5leHRUaW1lciA9IHRoaXMuZ2xvYmFscy5hdHRhY2tXYXZlcy5uZXh0VGltZXIgXiAxLjJcclxuICAgICAgICB0aGlzLmdsb2JhbHMuYXR0YWNrV2F2ZXMuY3VycmVudFRpbWUgPSAwXHJcbiAgICAgICAgLy9Qcm9jZXNzIHNvbWUgYXR0YWNrXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5nbG9iYWxzLmF0dGFja1dhdmVzLmN1cnJlbnRUaW1lcisrXHJcbiAgICAgIH1cclxuICAgIH1cclxufVxyXG4qLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU5BO0FBWUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUkE7QUFVQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQXRDQTtBQXdDQTtBQUNBO0FBR0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVZBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///iVgR\n");

/***/ }),

/***/ "v3/l":
/*!***************************************!*\
  !*** ./src/gameCode/FactoryBlocks.js ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var IgorJs_main__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! IgorJs/main */ \"7jDb\");\n/* harmony import */ var Chameleon_main__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! Chameleon/main */ \"6juG\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! minimatch */ \"2LKJ\");\n/* harmony import */ var minimatch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(minimatch__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].setStatic(\"itemStackCost.busExpansion\", [{\n  name: \"iron-chest\",\n  count: 2\n}]);\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].setStatic(\"itemStackCost.busProcessing\", [{\n  name: \"inserter\",\n  count: 2\n}]);\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].setStatic(\"itemStackCost.resBlock_foundation\", [{\n  name: \"stone\",\n  count: 5\n}, {\n  name: \"transport-belt\",\n  count: 4\n}]);\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].setStatic(\"itemStackCost.resBlock_miner\", [{\n  name: \"burner-mining-drill\",\n  count: 1\n}]);\nvar FactoryBlock = {};\n\nFactoryBlock.New = function (params, newObj, Igor) {\n  var features = Igor.getNamedObject(\"global\").activeFeatures.factoryBlocks;\n  newObj.name = params.name.string;\n  newObj.size = 50;\n  newObj.complexity = 10;\n  newObj.connections = {\n    sources: [],\n    drains: [],\n    maxSources: features.blocksMaxSources || 1,\n    maxDrains: features.blocksMaxDrains || 1\n  };\n  var bufferSettings = {\n    restrictable: true,\n    stacks: 1,\n    stackSize: 10\n  };\n  newObj.buffers = {};\n  newObj.buffers.in = Igor.newComponent(\"entity.buffer\", bufferSettings, newObj);\n  newObj.buffers.internal = Igor.newComponent(\"entity.buffer\", bufferSettings, newObj);\n  newObj.buffers.out = Igor.newComponent(\"entity.buffer\", bufferSettings, newObj);\n  newObj.processingList = {};\n  newObj.subIcon = \"stone\";\n  newObj.factoryLines = [];\n  newObj.factoryLines.push(Igor.newComponent(\"FactoryLine\", {\n    source: newObj.buffers.in,\n    drain: newObj.buffers.out,\n    internal: newObj.buffers.internal,\n    parent: newObj.$_id,\n    order: newObj.factoryLines.length\n  }));\n  newObj.$_tags.push(\"tick\", \"processing\");\n  return [newObj];\n};\n\nFactoryBlock.New.signature = {};\nFactoryBlock.New._signal = \"generalUpdate\";\n\nFactoryBlock.NewCCC = function (params, Igor) {\n  Igor.addNewObject(Igor.getNamedObject(\"global\").facBlocks.blocks, \"FactoryBlock\", params);\n};\n\nFactoryBlock.NewCCC.signature = {\n  name: \"string\"\n};\nFactoryBlock.NewCCC.CC_provide = \"facBlock.newBlock\";\n\nFactoryBlock.NewBusCCC = function (params, Igor) {\n  Igor.addNewObject(Igor.getNamedObject(\"global\").facBlocks.buses, \"FactoryBus\", params);\n};\n\nFactoryBlock.NewBusCCC.signature = {\n  name: \"string\"\n};\nFactoryBlock.NewBusCCC.CC_provide = \"facBlock.newBus\";\n\nFactoryBlock.NewResBlock = function (params, Igor) {\n  if (Igor.addNewObject(Igor.getNamedObject(\"global\").facBlocks.resBlocks, \"ResourceBlock\", params)) {\n    Igor.getNamedObject(\"global\").land.res_patches_used++;\n  }\n};\n\nFactoryBlock.NewResBlock.signature = {\n  name: \"string\" //WIP should become resource vein\n\n};\nFactoryBlock.NewResBlock.CC_provide = \"facBlock.newResBlock\";\n\nFactoryBlock.NewTechBlock = function (params, Igor) {\n  Igor.addNewObject(Igor.getNamedObject(\"global\").facBlocks.techBlocks, \"TechBlock\", params);\n};\n\nFactoryBlock.NewTechBlock.signature = {\n  name: \"string\"\n};\nFactoryBlock.NewTechBlock.CC_provide = \"facBlock.newTechBlock\";\n\nFactoryBlock.__tooltips = function (obj, args, retObj, Igor) {\n  var who = Igor.getId(obj) || null;\n  var data = [];\n  var tip = \"\";\n\n  switch (args.which) {\n    case \"resBlock\":\n      data.landCost = \"resource\";\n      data.complexity = 5;\n      tip = \"Next ResourceBlock\";\n      break;\n\n    case \"techBlock\":\n      data.landCost = 50;\n      data.complexity = 5;\n      tip = \"Next Tech Block\";\n      break;\n\n    case \"busLine\":\n      data.landCost = 25;\n      data.complexity = 5;\n      tip = \"Next Bus Line\";\n      break;\n\n    case \"factoryBlock\":\n      data.landCost = 50;\n      data.complexity = 10;\n      tip = \"Next Factory Block\";\n      break;\n\n    case \"addLine\":\n      data.landCost = \"??\";\n      data.complexity = \"??\";\n      tip = \"New Factory Line\";\n      break;\n  }\n\n  retObj._result = {\n    tool: \"blockCosts\",\n    tip: tip,\n    data: data\n  };\n};\n\nFactoryBlock.__tooltips.CC_utility = \"facBlock.__tooltips\";\n\nFactoryBlock.tick = function (obj, tickData, Igor) {\n  // Process I/O buffers\n  if (obj.connections.drains) {//console.log('process drains: push mode')\n  }\n};\n\nFactoryBlock.tick.signature = {};\n\nFactoryBlock.SelectSubIcon = function (obj, params, Igor) {\n  obj.at.factoryBlock.subIcon = obj.which.icon;\n};\n\nFactoryBlock.SelectSubIcon.signature = {\n  at: \"factoryBlock\",\n  which: \"icon\"\n};\nFactoryBlock.SelectSubIcon.CC_provide = \"factoryBlock.selectSubIcon\";\n\nFactoryBlock.ConsumeStacks = function (target, args, returnObj, Igor) {\n  //WIP\n  var consumable = args.itemStacks.reduce(function (accum_multi, x) {\n    if (accum_multi == -1) return -1;\n    var avail = Igor.processTEMP(Igor.getId(target.processingList[x.name].at).items, \"inventory.total\", {\n      name: x.name\n    });\n    return avail < x.amount ? -1 : Math.min(accum_multi, Math.floor(avail / x.amount));\n  }, args.multi);\n\n  if (consumable >= 1) {\n    args.itemStacks.forEach(function (x) {\n      Igor.processTEMP(Igor.getId(target.processingList[x.name].at), \"inventory.consume\", {\n        itemStacks: x,\n        multi: consumable\n      });\n    });\n  }\n\n  returnObj._result = consumable;\n};\n\nFactoryBlock.ConsumeStacks.signature = {};\nFactoryBlock.ConsumeStacks.Igor_operation = \"factoryBlock.consumeStacks\";\n\nFactoryBlock.ProduceStacks = function (target, args, returnObj, Igor) {\n  var depositable = args.itemStacks.reduce(function (accum_multi, x) {\n    if (accum_multi == -1) return -1; //Shortcircuit\n\n    var buffer = Igor.getId(target.processingList[x.name].at);\n    var avail = buffer.stackSize - Igor.processTEMP(buffer.items, \"inventory.total\", {\n      name: x.name\n    });\n    return avail < x.amount ? -1 : Math.min(accum_multi, Math.floor(avail / x.amount));\n  }, args.multi);\n\n  if (depositable >= 1) {\n    args.itemStacks.forEach(function (x) {\n      Igor.processTEMP(Igor.getId(target.processingList[x.name].at), \"inventory.add\", {\n        itemStacks: x,\n        multi: depositable\n      });\n    });\n  }\n\n  returnObj._result = depositable;\n};\n\nFactoryBlock.ProduceStacks.signature = {};\nFactoryBlock.ProduceStacks.Igor_operation = \"factoryBlock.produceStacks\";\n\nFactoryBlock.SetConnection = function (obj, Igor) {\n  var callFn = obj.dir.string == \"source\" ? \"Drain\" : \"Source\";\n\n  if (obj.at.factoryBlock.connections[obj.dir.string + 's'] == obj.to_which.factoryBus) {\n    Igor.processTEMP(obj.to_which.factoryBus, \"factoryBus.clear\" + callFn, {\n      who: obj.at.factoryBlock.$_id\n    });\n    return;\n  } //Clear prior connection\n  //Can execute on factoryBus...\n\n\n  if (Igor.processTEMP(obj.to_which.factoryBus, \"factoryBus.add\" + callFn, {\n    who: obj.at.factoryBlock.$_id\n  })) {\n    obj.at.factoryBlock.connections[obj.dir.string + 's'] = obj.to_which.factoryBus;\n  }\n\n  Igor.processTEMP(obj.to_which.factoryBus, \"factoryBus.connectTo\", {});\n};\n\nFactoryBlock.SetConnection.signature = {\n  at: \"factoryBlock\",\n  to_which: \"factoryBus\",\n  dir: \"string\"\n};\nFactoryBlock.SetConnection.CC_provide = \"factoryBlock.setConnection\";\n\nFactoryBlock.AddFactoryLine = function (obj, Igor) {\n  // obj.at.factoryBlock.complexity\n  // Inventory.consume some cost\n  obj.at.factoryBlock.factoryLines.push(Igor.newComponent(\"FactoryLine\", {\n    source: obj.at.factoryBlock.buffers.in,\n    drain: obj.at.factoryBlock.buffers.out,\n    internal: obj.at.factoryBlock.buffers.internal,\n    parent: obj.at.factoryBlock.$_id,\n    order: obj.at.factoryBlock.factoryLines.length || 0\n  })); // obj.at.factoryBlock.complexity++\n\n  Igor.view.signaler.signal(\"generalUpdate\");\n};\n\nFactoryBlock.AddFactoryLine.signature = {\n  at: \"factoryBlock\"\n};\nFactoryBlock.AddFactoryLine.CC_provide = \"factoryBlock.addLine\";\n\nFactoryBlock.SetProcessItems = function (target, args, returnObj, Igor) {\n  console.log('set process');\n  args.lists.consume.forEach(function (x) {\n    if (!target.processingList[x]) {\n      target.processingList[x] = {\n        at: target.buffers.in,\n        consume: [args.listId]\n      };\n    } else if (target.processingList[x].at == target.buffers.internal) {\n      target.processingList[x].consume.push(args.listId);\n    } else if (target.processingList[x].at == target.buffers.out) {\n      // Move to internal\n      target.processingList[x].at = target.buffers.internal;\n      target.processingList[x].consume = [];\n      target.processingList[x].consume.push(args.listId);\n    } else {//x is found and at input already\n    }\n  });\n  args.lists.produce.forEach(function (x) {\n    if (!target.processingList[x]) {\n      target.processingList[x] = {\n        at: target.buffers.out,\n        produce: [args.listId]\n      };\n    } else if (target.processingList[x].at == target.buffers.internal) {\n      target.processingList[x].produce.push(args.listId);\n    } else if (target.processingList[x].at == target.buffers.in) {\n      //move it\n      target.processingList[x].at = target.buffers.internal;\n      target.processingList[x].produce = [];\n      target.processingList[x].produce.push(args.listId);\n    }\n  }); //TODO this doesn't respect stack limits on the buffers\n\n  Igor.processTEMP(target.buffers.in, \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == target.buffers.in;\n    })\n  });\n  Igor.processTEMP(target.buffers.internal, \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == target.buffers.internal;\n    })\n  });\n  Igor.processTEMP(target.buffers.out, \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == target.buffers.out;\n    })\n  });\n};\n\nFactoryBlock.SetProcessItems.Igor_operation = \"factoryBlock.setProcessItems\";\n\nFactoryBlock.ClearProcessItems = function (target, args, returnObj, Igor) {\n  args.lists.consume.forEach(function (x) {\n    var which = target.processingList[x];\n    which.consume.splice(which.consume.indexOf(args.listId), 1);\n\n    if (which.consume.length == 0) {\n      var _which$produce;\n\n      if (which.at == target.buffers.internal && ((_which$produce = which.produce) == null ? void 0 : _which$produce.length) > 0) {\n        which.at = target.buffers.out;\n      } else {\n        delete target.processingList[x];\n      }\n    }\n  });\n  args.lists.produce.forEach(function (x) {\n    var which = target.processingList[x];\n    which.produce.splice(which.produce.indexOf(args.listId), 1);\n\n    if (which.produce.length == 0) {\n      var _which$consume;\n\n      if (which.at == target.buffers.internal && ((_which$consume = which.consume) == null ? void 0 : _which$consume.length) > 0) {\n        which.at = target.buffers.in;\n      } else {\n        delete target.processingList[x];\n      }\n    }\n  });\n  Igor.processTEMP(Igor.getId(target.buffers.in), \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == \"in\";\n    })\n  });\n  Igor.processTEMP(Igor.getId(target.buffers.internal), \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == \"internal\";\n    })\n  });\n  Igor.processTEMP(Igor.getId(target.buffers.out), \"buffer.restrictList\", {\n    list: Object.keys(target.processingList).filter(function (x) {\n      return target.processingList[x].at == \"out\";\n    })\n  });\n};\n\nFactoryBlock.ClearProcessItems.Igor_operation = \"factoryBlock.clearProcessItems\";\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"FactoryBlock\", FactoryBlock.New, FactoryBlock);\n/*\r\n    Factory Line\r\n*/\n\nvar FactoryLine = {};\n\nFactoryLine.New = function (params, newObj, Igor) {\n  newObj.prepped = 0;\n  newObj.built = 0;\n  newObj.buildingType = null;\n  newObj.recipe = null;\n  newObj.itemTargets = null;\n  newObj.processing_time = -1;\n  newObj.connections = {\n    source: params.source,\n    drain: params.drain,\n    internal: params.internal\n  };\n  newObj.order = params.order;\n  newObj.$_parent = params.parent;\n  return [newObj];\n};\n\nFactoryLine.New.signature = {\n  source: 'entity.buffer',\n  drain: 'entity.buffer',\n  internal: 'entity.buffer'\n};\nFactoryLine.New._signal = \"generalUpdate\";\n\nFactoryLine.__delete = function (obj, Igor) {\n  obj.$_tags.delete(\"tick\");\n  Igor.processTEMP(\"player.inventory\", \"inventory.add\", {\n    itemStacks: {\n      name: obj.buildingType,\n      count: obj.built\n    }\n  });\n  var foundation = Igor.processTEMP(obj, \"factoryLine.toolTips\", {\n    which: \"foundation\"\n  }).data;\n  Igor.processTEMP(\"player.inventory\", \"inventory.add\", {\n    itemStacks: foundation,\n    multi: obj.built + obj.prepped\n  });\n\n  if (obj.processing_count) {\n    Igor.processTEMP(\"player.inventory\", \"inventory.add\", {\n      itemStacks: obj.rescipe.ingredients,\n      multi: obj.processing_count\n    });\n  }\n\n  var parent = Igor.getId(obj.$_parent);\n  var idx = parent.factoryLines.indexOf(obj.$_id);\n  parent.factoryLines.splice(idx, 1); //TODO adjust land use and complexity\n\n  Igor.view.signaler.signal(\"generalUpdate\");\n};\n\nFactoryLine.__delete.Igor_operation = \"FactoryLine.delete\";\n\nFactoryLine.SetType = function (obj, Igor) {\n  obj.at.factoryLine.buildingType = obj.which.building.name;\n  obj.at.factoryLine.crafting_categories = obj.which.building.crafting_categories; //Create Lookup by building type\n\n  obj.at.factoryLine.foundationCost = [{\n    name: \"stone\",\n    count: 5\n  }];\n};\n\nFactoryLine.SetType.signature = {\n  at: [\"factoryLine\", \"factoryBlock\"],\n  which: \"building\"\n};\nFactoryLine.SetType.CC_provide = \"factoryLine.setBuilding\";\n\nFactoryLine.Prep = function (obj, Igor) {\n  if (!obj.at.factoryLine.foundationCost) return;\n\n  if (Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: obj.at.factoryLine.foundationCost\n  })) {\n    obj.at.factoryLine.prepped++;\n    obj.at.factoryBlock.size += 10; //# magic number\n\n    obj.at.factoryBlock.complexity += 5; //# magic number\n  } else {\n    Igor.view.warnToast(\"Cannot consume foundation costs\");\n  }\n};\n\nFactoryLine.Prep.signature = {\n  at: [\"factoryLine\", \"factoryBlock\"],\n  player: \"inventory\"\n};\nFactoryLine.Prep.CC_provide = \"factoryLine.prep\";\n\nFactoryLine.Expand = function (obj, Igor) {\n  if (obj.at.factoryLine.prepped == 0) return;\n\n  if (Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: {\n      name: obj.at.factoryLine.buildingType,\n      count: 1\n    }\n  })) {\n    obj.at.factoryLine.built++;\n    obj.at.factoryLine.prepped--;\n\n    if (obj.at.factoryLine.recipe) {\n      if (Number.isInteger(obj.at.factoryLine.processing_ticks)) {\n        var consumed = Igor.processTEMP(obj.at.factoryBlock, \"factoryBlock.consumeStacks\", {\n          itemStacks: obj.at.factoryLine.recipe.ingredients,\n          multi: 1\n        });\n\n        if (consumed) {\n          obj.at.factoryLine.processing_ticks *= (obj.at.factoryLine.built - 1) / obj.at.factoryLine.built;\n          obj.at.factoryLine.processing_count++;\n        }\n      }\n\n      obj.at.factoryLine.$_tags.push(\"tick\", \"processing\");\n    }\n  } else {\n    Igor.view.warnToast(\"Building not in inventory\");\n  }\n};\n\nFactoryLine.Expand.signature = {\n  at: [\"factoryLine\", \"factoryBlock\"],\n  player: 'inventory'\n};\nFactoryLine.Expand.CC_provide = \"factoryLine.addBuilding\";\n/*\r\n*/\n\nFactoryLine.SetRecipe = function (obj, Igor) {\n  if (obj.at.factoryLine.recipe) {\n    if (obj.at.factoryLine.recipe !== obj.which.recipe) {\n      Igor.processTEMP(obj.at.factoryBlock, \"factoryBlock.clearProcessItems\", {\n        lists: obj.at.factoryLine.processList\n      });\n    } else {\n      obj.at.factoryLine.recipe = null;\n      obj.at.factoryLine.$_tags.delete(\"tick\");\n      return;\n    }\n  }\n\n  var recipe = Igor.data.recipe[obj.which.recipe];\n  var lists = {\n    consume: recipe.ingredients.map(function (x) {\n      return x.name;\n    }),\n    produce: recipe.results.map(function (x) {\n      return x.name;\n    })\n  };\n  var FB_set = Igor.processTEMP(obj.at.factoryBlock, \"factoryBlock.setProcessItems\", {\n    lists: lists,\n    listId: obj.at.factoryLine.$_id\n  });\n\n  if (FB_set) {\n    obj.at.factoryLine.processList = lists;\n    obj.at.factoryLine.recipe = recipe; // store full object, not argument from obj.which.recipe\n\n    obj.at.factoryLine.processing_time = recipe.crafting_speed / Igor.data.entity[obj.at.factoryLine.buildingType].crafting_speed * Igor.getStatic(\"config.TICKS_PER_SECOND\");\n    obj.at.factoryLine.processing_ticks = NaN;\n    obj.at.factoryLine.built && obj.at.factoryLine.$_tags.push(\"tick\", \"processing\"); //Just wait till next tick to start processing the recipe\n  } else {\n    // Factory Block set failed...\n    console.error(\"Couldn't set my items on the parent factoryBlock\");\n    debugger;\n  }\n};\n\nFactoryLine.SetRecipe.signature = {\n  at: [\"factoryLine\", \"factoryBlock\"],\n  which: \"recipe\",\n  player: \"inventory\"\n};\nFactoryLine.SetRecipe.CC_provide = \"factoryLine.setRecipe\";\n\nFactoryLine.__tooltips = function (obj, args, ret, Igor) {\n  var who = Igor.getId(obj);\n  var data = [];\n  var tip = \"\";\n\n  switch (args.which) {\n    case \"foundation\":\n      data.push({\n        name: \"stone\",\n        count: 5\n      });\n      tip = \"Foundation Cost\";\n      break;\n  }\n\n  ret._result = {\n    tool: \"stackArray\",\n    tip: tip,\n    data: data\n  };\n};\n\nFactoryLine.__tooltips.Igor_operation = \"factoryLine.toolTips\";\nFactoryLine.__tooltips.CC_utility = \"factoryLine.toolTips\";\n\nFactoryLine.tick = function (entity, tickdata, Igor) {\n  if (entity.built == 0 || !entity.processing_time || !entity.recipe) return; //TODO turn this into an \"anti-tick\" tag\n  //consume from buffers if empty\n\n  if (entity.delay) {\n    if (--entity.delay == 0) {\n      entity.delay = null;\n    }\n\n    return;\n  }\n\n  if (Number.isNaN(entity.processing_ticks)) {\n    var consumed = Igor.processTEMP(entity.$_parent, \"factoryBlock.consumeStacks\", {\n      itemStacks: entity.recipe.ingredients,\n      multi: entity.built\n    });\n\n    if (consumed > 0) {\n      entity.processing_ticks = 0;\n      entity.processing_count = consumed;\n    } else {\n      entity.delay = Math.ceil(entity.processing_time * 0.1);\n    }\n  } else if (entity.processing_ticks >= entity.processing_time) {\n    var added = Igor.processTEMP(entity.$_parent, \"factoryBlock.produceStacks\", {\n      itemStacks: entity.recipe.results,\n      multi: entity.processing_count\n    });\n\n    if (added > 0) {\n      entity.processing_ticks = NaN;\n    } else {\n      // Couldn't deposit all so... try again after a delay\n      entity.delay = Math.ceil(entity.processing_time * 0.1);\n    }\n  } else {\n    entity.processing_ticks++;\n  }\n};\n\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"FactoryLine\", FactoryLine.New, FactoryLine);\n/**\r\n *  * Factory Bus\r\n *  TODO: source/drains are managed from factoryBlocks\r\n *  TODO: Ticker to move things between buffers\r\n *  TODO: Upgrades and expansions\r\n * \r\n */\n\nvar FactoryBus = {};\n\nFactoryBus.New = function (params, newObj, Igor) {\n  newObj.name = params.name.string;\n  newObj.size = 25;\n  newObj.complexity = 5;\n  newObj.connections = {\n    sources: [],\n    drains: [],\n    maxSources: 0,\n    maxDrains: 0\n  };\n  newObj.processors = {\n    source: {\n      xferTicks: 120,\n      xferTimer: 0,\n      xferTarget: 0,\n      xferQty: 0\n    },\n    drain: {\n      xferTicks: 120,\n      xferTimer: 0,\n      xferTarget: 0,\n      xferQty: 0\n    },\n    central: Igor.newComponent(\"entity.buffer\", {\n      stacks: 1,\n      stackSize: 10\n    }, newObj.$_id)\n  };\n  newObj.clogged = false;\n  newObj.subIcon = \"stone\"; // newObj.$_tags.push(\"tick\", \"processing\")\n\n  return [newObj];\n};\n\nFactoryBus.New._signal = \"generalUpdate\";\n\nFactoryBus.SelectSubIcon = function (obj, params, Igor) {\n  obj.at.factoryBus.subIcon = obj.which.icon;\n};\n\nFactoryBus.SelectSubIcon.signature = {\n  at: \"factoryBus\",\n  which: \"icon\"\n};\nFactoryBus.SelectSubIcon.CC_provide = \"factoryBus.selectSubIcon\";\n\nFactoryBus.ClearConnection = function (target, args, returnObj, Igor) {\n  var conn = args.dir == \"sources\" ? \"drains\" : \"sources\";\n  var idx = target.connections[conn].findIndex(function (x) {\n    return x.buffer == args.id;\n  });\n\n  if (idx == -1) {\n    console.log(\"couldn't find index\");\n    debugger;\n  }\n\n  target.connections[conn].splice(idx, 1);\n  target.processors[conn].xferTarget = 0;\n};\n\nFactoryBus.ClearConnection.Igor_operation = \"factoryBus.clearConnection\";\n\nFactoryBus.ConnectTo = function (obj, Igor) {\n  var bus = Igor.getId(obj.connectTo.factoryBus);\n  var block = Igor.getId(obj.connectTo.block);\n\n  if (obj.dir.string == \"output\") {\n    //target drain, bus source\n    if (obj.current.bus != -1 && block.connections.drains.includes(obj.current.bus)) {\n      var idx = block.connections.drains.indexOf(obj.current.bus);\n      block.connections.drains.splice(idx, 1);\n      var curr = Igor.getId(obj.current.bus);\n      idx = curr.connections.sources.indexOf(block.$_id);\n      curr.connections.sources.splice(idx, 1);\n      curr.processors.source.xferTarget = 0;\n    }\n\n    if (block.connections.drains.length < block.connections.maxDrains && bus.connections.sources.length < bus.connections.maxSources) {\n      block.connections.drains.push(obj.connectTo.factoryBus);\n      bus.connections.sources.push(obj.connectTo.block);\n    } else {\n      Igor.view.warnToast(\"No available source connections\");\n    }\n  } else {\n    //target source, bus drain\n    if (obj.current.bus != -1 && block.connections.sources.includes(obj.current.bus)) {\n      var _idx = block.connections.sources.indexOf(obj.current.bus);\n\n      block.connections.sources.splice(_idx, 1);\n\n      var _curr = Igor.getId(obj.current.bus);\n\n      _idx = _curr.connections.drains.indexOf(block.$_id);\n\n      _curr.connections.drains.splice(_idx, 1);\n\n      _curr.processors.drain.xferTarget = 0;\n    }\n\n    if (block.connections.sources.length < block.connections.maxSources && bus.connections.drains.length < bus.connections.maxDrains) {\n      block.connections.sources.push(obj.connectTo.factoryBus);\n      bus.connections.drains.push(obj.connectTo.block);\n    } else {\n      Igor.view.warnToast(\"No available drain connections\");\n    }\n  }\n\n  Igor.view.signaler.signal(\"generalUpdate\");\n};\n\nFactoryBus.ConnectTo.signature = {\n  dir: \"string\",\n  connectTo: [\"factoryBus\", \"block\"],\n  current: \"bus\"\n};\nFactoryBus.ConnectTo.CC_provide = \"factoryBus.connectTo\";\n\nFactoryBus.ExpandBus = function (obj, Igor) {\n  var consumed = Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: Igor.getStatic(\"itemStackCost.busExpansion\")\n  });\n  if (!consumed) return Igor.view.warnToast(\"Unable to consume costs to expand bus\");\n\n  if (obj.dir.string == \"source\") {\n    obj.at.factoryBus.connections.maxSources += 1;\n    obj.at.factoryBus.complexity += 5;\n    obj.at.factoryBus.size += 10;\n  } else if (obj.dir.string == \"drain\") {\n    obj.at.factoryBus.connections.maxDrains += 1;\n    obj.at.factoryBus.size += 10;\n    obj.at.factoryBus.complexity += 5;\n  }\n\n  if (obj.at.factoryBus.connections.maxSources && obj.at.factoryBus.connections.maxDrains) {\n    obj.at.factoryBus.$_tags.push(\"tick\", \"processing\");\n  }\n\n  var central = Igor.getId(obj.at.factoryBus.processors.central);\n  central.maxStacks = Math.min(Math.ceil(obj.at.factoryBus.size / 50), 15);\n};\n\nFactoryBus.ExpandBus.signature = {\n  at: \"factoryBus\",\n  dir: \"string\",\n  player: \"inventory\"\n};\nFactoryBus.ExpandBus.CC_provide = \"factoryBus.expandBus\";\n\nFactoryBus.ExpandProcessing = function (obj, Igor) {\n  var consumed = Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: Igor.getStatic(\"itemStackCost.busProcessing\")\n  });\n  if (!consumed) return Igor.view.warnToast(\"Unable to consume costs to expand bus\");\n\n  if (obj.dir.string == \"source\") {\n    obj.at.factoryBus.processors.source.xferQty += 2;\n    obj.at.factoryBus.size += 10;\n    obj.at.factoryBus.complexity += 5;\n  } else if (obj.dir.string == \"drain\") {\n    obj.at.factoryBus.processors.drain.xferQty += 2;\n    obj.at.factoryBus.size += 10;\n    obj.at.factoryBus.complexity += 5;\n  }\n};\n\nFactoryBus.ExpandProcessing.signature = {\n  at: \"factoryBus\",\n  dir: \"string\",\n  player: \"inventory\"\n};\nFactoryBus.ExpandProcessing.CC_provide = \"factoryBus.expandProcessing\";\n\nFactoryBus.__tooltips = function (obj, args, ret, Igor) {\n  if (!obj) return;\n  var who = Igor.getId(obj);\n  var data = [];\n  var tip = \"\";\n\n  switch (args.which) {\n    case \"input_processing\":\n      data.push({\n        name: \"inserter\",\n        count: 2\n      });\n      tip = \"Input Processing\";\n      break;\n\n    case \"expand_input_sources\":\n      data.push({\n        name: \"iron-chest\",\n        count: 2\n      });\n      who.connections.maxSources && data.push({\n        name: \"transport-belt\",\n        count: 5 * who.connections.maxSources\n      });\n      tip = \"Expand Source Points\";\n      break;\n\n    case \"output_processing\":\n      data.push({\n        name: \"inserter\",\n        count: 2\n      });\n      tip = \"Output Processing\";\n      break;\n\n    case \"expand_output_drains\":\n      data.push({\n        name: \"iron-chest\",\n        count: 2\n      });\n      who.connections.maxDrains && data.push({\n        name: \"transport-belt\",\n        count: 5 * who.connections.maxDrains\n      });\n      tip = \"Expand Drain Points\";\n      break;\n  }\n\n  ret._result = {\n    tool: \"stackArray\",\n    tip: tip,\n    data: data\n  };\n};\n\nFactoryBus.__tooltips.CC_utility = \"busLine_Costs\";\n\nFactoryBus.ClearClog = function (obj, Igor) {\n  Igor.getId(obj.at.factoryBus.processors.central).items.forEach(function (x) {\n    Igor.processTEMP(\"player.inventory\", \"inventory.add\", {\n      itemStacks: x\n    });\n    x.count = 0;\n    x.icon = undefined;\n  });\n  obj.at.factoryBus.clogged = false;\n};\n\nFactoryBus.ClearClog.signature = {\n  at: \"factoryBus\"\n};\nFactoryBus.ClearClog.CC_provide = \"factoryBus.clearClog\";\n\nFactoryBus.tick = function (entity, tickdata, Igor) {\n  var _entity$processors$so, _entity$processors$dr;\n\n  if (entity.connections.sources.length > 0 && ((_entity$processors$so = entity.processors.source) == null ? void 0 : _entity$processors$so.xferQty) > 0) {\n    if (entity.processors.source.xferTimer >= entity.processors.source.xferTicks) {\n      var busXfer = Igor.processTEMP(Igor.getId(entity.connections.sources[entity.processors.source.xferTarget], \"buffers.out\"), \"buffer.busXfer\", {\n        xferCount: entity.processors.source.xferQty,\n        toBus: entity.processors.central\n      });\n\n      if (busXfer.full) {\n        entity.clogged = true;\n      }\n\n      ++entity.processors.source.xferTarget == entity.connections.sources.length && (entity.processors.source.xferTarget = 0);\n      entity.processors.source.xferTimer = 0;\n    } else {\n      entity.processors.source.xferTimer++;\n    }\n  }\n\n  if (entity.connections.drains.length > 0 && ((_entity$processors$dr = entity.processors.drain) == null ? void 0 : _entity$processors$dr.xferQty) > 0) {\n    if (entity.processors.drain.xferTimer >= entity.processors.drain.xferTicks) {\n      var _busXfer = Igor.processTEMP(Igor.getId(entity.connections.drains[entity.processors.drain.xferTarget], \"buffers.in\"), \"buffer.busXfer\", {\n        xferCount: entity.processors.drain.xferQty,\n        fromBus: entity.processors.central\n      });\n\n      if (_busXfer.full) {//skip outputting?\n      }\n\n      ++entity.processors.drain.xferTarget == entity.connections.drains.length && (entity.processors.drain.xferTarget = 0);\n      entity.processors.drain.xferTimer = 0;\n    } else {\n      entity.processors.drain.xferTimer++;\n    }\n  }\n};\n\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"FactoryBus\", FactoryBus.New, FactoryBus);\n/*\r\n *  Resource Block\r\n */\n\nvar ResourceBlock = {};\n\nResourceBlock.New = function (params, newObj, Igor) {\n  newObj.name = params.name.string;\n  newObj.patchProperties = {};\n  newObj.spaceUsed = 50;\n  newObj.complexity = 1;\n  newObj.connections = {\n    drains: [],\n    maxDrains: 1\n  };\n  newObj.prepped = 0;\n  newObj.built = 0;\n  newObj.mining_ticks = NaN;\n  newObj.mining_drill = \"burner-mining-drill\";\n  newObj.buffers = {};\n  newObj.buffers.out = Igor.newComponent(\"entity.buffer\", {\n    restrictable: true,\n    stacks: 1,\n    stackSize: 0\n  }, newObj);\n  return [newObj];\n};\n\nResourceBlock.New._signal = \"generalUpdate\";\n\nResourceBlock.SetResource = function (obj, Igor) {\n  var resBlock = obj.at.ResourceBlock;\n\n  if (obj.at.ResourceBlock.patchProperties.resource) {\n    var buffer = Igor.getId(resBlock.buffers.out);\n    Igor.processTEMP(Igor.getNamedObject(\"player.inventory\"), \"inventory.add\", {\n      itemStacks: buffer.items\n    });\n    buffer.items = [];\n  }\n\n  obj.at.ResourceBlock.$_tags.push(\"tick\", \"processing\");\n  obj.at.ResourceBlock.patchProperties.resource = obj.which.resource;\n\n  if (obj.at.ResourceBlock.mining_drill) {\n    obj.at.ResourceBlock.patchProperties.mining_time = Igor.data.resource[obj.which.resource].mining_time / Igor.data.entity[obj.at.ResourceBlock.mining_drill].mining_speed * Igor.getStatic(\"config.TICKS_PER_SECOND\");\n    obj.at.ResourceBlock.mining_ticks = obj.at.ResourceBlock.patchProperties.mining_time;\n    obj.at.ResourceBlock.subIcon = obj.at.ResourceBlock.patchProperties.resource;\n  }\n};\n\nResourceBlock.SetResource.signature = {\n  at: \"ResourceBlock\",\n  which: 'resource'\n};\nResourceBlock.SetResource.CC_provide = \"resBlock.setResource\";\n\nResourceBlock.PrepSpace = function (obj, Igor) {\n  if (Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: Igor.getStatic('itemStackCost.resBlock_foundation')\n  })) {\n    obj.at.ResourceBlock.prepped++;\n    obj.at.ResourceBlock.spaceUsed += 10;\n    obj.at.ResourceBlock.complexity += 5;\n  } else {\n    Igor.view.warnToast(\"Unable to consume foundation costs\");\n  }\n};\n\nResourceBlock.PrepSpace.signature = {\n  at: \"ResourceBlock\",\n  player: \"inventory\"\n};\nResourceBlock.PrepSpace.CC_provide = \"resBlock.prepSpace\";\n\nResourceBlock.BuildMine = function (obj, Igor) {\n  if (obj.at.ResourceBlock.prepped == 0) return;\n\n  if (Igor.processTEMP(obj.player.inventory, \"inventory.consume\", {\n    itemStacks: Igor.getStatic('itemStackCost.resBlock_miner')\n  })) {\n    obj.at.ResourceBlock.prepped--;\n    obj.at.ResourceBlock.built++;\n    Igor.getId(obj.at.ResourceBlock.buffers.out).stackSize += 5;\n  } else {\n    return Igor.view.warnToast(\"Mining drill not available\");\n  }\n};\n\nResourceBlock.BuildMine.signature = {\n  at: \"ResourceBlock\",\n  player: \"inventory\"\n};\nResourceBlock.BuildMine.CC_provide = \"resBlock.buildMine\";\n\nResourceBlock.__foundationCost = function (obj, x_null, ret, Igor) {\n  var who = Igor.getId(obj);\n  var is = [{\n    name: \"stone\",\n    count: 5\n  }];\n  is.push({\n    name: \"transport-belt\",\n    count: Math.floor(who.spaceUsed / 10)\n  });\n  ret._result = {\n    tool: 'stackArray',\n    tip: 'Foundation Cost',\n    data: is\n  };\n};\n\nResourceBlock.__foundationCost.CC_utility = \"resBlock.__foundationCost\";\n\nResourceBlock.__minerCost = function (obj, args_null, ret, Igor) {\n  var who = Igor.getId(obj);\n  var is = [{\n    name: who.mining_drill,\n    count: 1\n  }];\n  ret._result = {\n    tool: 'stackArray',\n    tip: 'Foundation Cost',\n    data: is\n  };\n};\n\nResourceBlock.__minerCost.CC_utility = \"resBlock.__minerCost\";\n\nResourceBlock.tick = function (entity, tickdata, Igor) {\n  if (entity.built == 0 || !entity.patchProperties.mining_time) return;\n\n  if (entity.mining_ticks == 0) {\n    var stored = Igor.processTEMP(entity.buffers.out, \"inventory.add\", {\n      itemStacks: {\n        name: entity.patchProperties.resource,\n        count: entity.storedResources || entity.built\n      }\n    });\n    entity.mining_ticks = entity.patchProperties.mining_time;\n  } else {\n    entity.mining_ticks--;\n  }\n};\n\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"ResourceBlock\", ResourceBlock.New, ResourceBlock);\nvar TechBlock = {};\n\nTechBlock.New = function (params, newObj, Igor) {\n  newObj.name = params.name.string;\n  newObj.spaceUsed = 50;\n  newObj.complexity = 10;\n  newObj.prepped = 0;\n  newObj.built = 0;\n  newObj.connections = {\n    sources: [],\n    maxSources: 1\n  };\n  newObj.buffers = {};\n  newObj.buffers.in = Igor.newComponent(\"entity.buffer\", {\n    restrictable: true,\n    stackSize: 10,\n    maxStack: 2\n  }, newObj.$_id);\n  newObj.techTreeClass = \"main\";\n  newObj.subIcon = \"automation-science-pack\";\n  newObj.research_speed = 1;\n  newObj.research_ticks = NaN;\n  newObj.research_time = 0;\n  newObj.buildingType = \"lab\";\n  newObj.foundationType = \"\";\n  return [newObj];\n};\n\nTechBlock.New._signal = \"generalUpdate\";\n\nTechBlock.prepSpace = function (obj, Igor) {\n  if (Igor.processTEMP(\"player.inventory\", \"inventory.consume\", {\n    itemStacks: Igor.processTEMP(obj.at.techBlock, \"techBlock.toolTips\", {\n      which: \"foundation\"\n    }).data\n  })) {\n    obj.at.techBlock.prepped++;\n    obj.at.techBlock.spaceUsed += 10;\n    obj.at.techBlock.complexity += 5;\n  } else {\n    Igor.view.warnToast(\"Not enough materials for foundation\");\n  }\n};\n\nTechBlock.prepSpace.signature = {\n  at: \"techBlock\"\n};\nTechBlock.prepSpace.CC_provide = \"techBlock.prepSpace\";\n\nTechBlock.BuildTech = function (obj, Igor) {\n  if (obj.at.techBlock.prepped == 0) return;\n\n  if (Igor.processTEMP(\"player.inventory\", \"inventory.consume\", {\n    itemStacks: Igor.processTEMP(obj.at.techBlock, \"techBlock.toolTips\", {\n      which: \"buildLab\"\n    }).data\n  })) {\n    obj.at.techBlock.prepped--;\n    obj.at.techBlock.built++;\n    Igor.getId(obj.at.techBlock.buffers.in).stackSize += 5;\n  } else {\n    Igor.view.warnToast(\"Not enough materials to build lab\");\n  }\n\n  if (!obj.at.techBlock.bufferSet) {\n    Igor.processTEMP(obj.at.techBlock.buffers.in, \"buffer.restrictList\", {\n      list: ['automation-science-pack', 'logistic-science-pack']\n    });\n    obj.at.techBlock.bufferSet = true;\n  }\n\n  obj.at.techBlock.$_tags.push(\"tick\", \"processing\");\n};\n\nTechBlock.BuildTech.signature = {\n  at: \"techBlock\"\n};\nTechBlock.BuildTech.CC_provide = \"techBlock.buildLab\";\n\nTechBlock.SetTree = function (obj, Igor) {\n  Igor.view.errorToast(\"Not Yet Implemented\");\n  /*\r\n      set building type\r\n          foundation type\r\n          researching_speed\r\n  */\n};\n\nTechBlock.SetTree.signature = {\n  at: 'techBlock'\n};\nTechBlock.SetTree.CC_provide = \"techBlock.setTree\";\n\nTechBlock.__tooltips = function (obj, args, ret, Igor) {\n  var who = Igor.getId(obj);\n  var data = [];\n  var tip = \"\";\n\n  switch (args.which) {\n    case 'foundation':\n      data.push({\n        name: \"inserter\",\n        count: 2\n      });\n      data.push({\n        name: \"stone\",\n        count: 5\n      });\n      tip = \"Lab foundation\";\n      break;\n\n    case 'buildLab':\n      data.push({\n        name: \"lab\",\n        count: 1\n      });\n      tip = \"Lab building\";\n      break;\n\n    case 3:\n      break;\n  }\n\n  ret._result = {\n    tool: \"stackArray\",\n    tip: tip,\n    data: data\n  };\n};\n\nTechBlock.__tooltips.Igor_operation = \"techBlock.toolTips\";\nTechBlock.__tooltips.CC_utility = \"techBlock.toolTips\";\n\nTechBlock.tick = function (obj, tickData, Igor) {\n  var research = Igor.getNamedObject('research').progressing;\n  if (!research) return;\n\n  if (Number.isNaN(obj.research_ticks) || obj.research_ticks === null) {\n    var cost = research.cost.ingredients.map(function (_ref) {\n      var name = _ref[0],\n          qty = _ref[1];\n      return {\n        name: name,\n        count: qty\n      };\n    });\n    var canConsume = Igor.processTEMP(obj.buffers.in, \"inventory.consume\", {\n      itemStacks: cost,\n      multi: obj.built\n    });\n    obj.research_time = research.cost.time * Igor.getStatic(\"config.TICKS_PER_SECOND\") * obj.research_speed;\n\n    if (!canConsume) {\n      obj.research_consumed = 0;\n      obj.research_ticks = obj.research_time * 0.1;\n      obj.stalled = true;\n      return;\n    }\n\n    obj.stalled = false;\n    obj.research_ticks = obj.research_time;\n    obj.research_consumed = canConsume;\n  } else if (obj.research_ticks) {\n    --obj.research_ticks;\n  } else if (obj.research_ticks <= 0) {\n    if (obj.research_consumed) {\n      var ret = Igor.processTEMP(research, \"research.update\", {\n        count: obj.research_consumed,\n        me: obj.$_id\n      });\n\n      var _cost = research.cost.ingredients.map(function (_ref2) {\n        var name = _ref2[0],\n            qty = _ref2[1];\n        return {\n          name: name,\n          count: qty\n        };\n      });\n\n      Igor.processTEMP(obj.buffers.in, \"inventory.add\", {\n        itemStacks: _cost,\n        force: true,\n        multi: ret\n      });\n    }\n\n    obj.research_ticks = NaN;\n  }\n};\n\nIgorJs_main__WEBPACK_IMPORTED_MODULE_0__[\"IgorUtils\"].defineObj(\"TechBlock\", TechBlock.New, TechBlock);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidjMvbC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9nYW1lQ29kZS9GYWN0b3J5QmxvY2tzLmpzP2JmN2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJZ29yVXRpbHMgYXMgSWdvckpzfSBmcm9tIFwiSWdvckpzL21haW5cIlxyXG5pbXBvcnQge0NoYW1lbGVvblZpZXdlciBhcyBDaGFtZUpzfSBmcm9tIFwiQ2hhbWVsZW9uL21haW5cIlxyXG5pbXBvcnQgTSBmcm9tIFwibWluaW1hdGNoXCJcclxuXHJcbklnb3JKcy5zZXRTdGF0aWMoXCJpdGVtU3RhY2tDb3N0LmJ1c0V4cGFuc2lvblwiLCBbe25hbWU6IFwiaXJvbi1jaGVzdFwiLCBjb3VudDogMn1dKVxyXG5JZ29ySnMuc2V0U3RhdGljKFwiaXRlbVN0YWNrQ29zdC5idXNQcm9jZXNzaW5nXCIsIFt7bmFtZTogXCJpbnNlcnRlclwiLCBjb3VudDogMn1dKVxyXG5JZ29ySnMuc2V0U3RhdGljKFwiaXRlbVN0YWNrQ29zdC5yZXNCbG9ja19mb3VuZGF0aW9uXCIsIFt7bmFtZTogXCJzdG9uZVwiLCBjb3VudDogNX0sIHtuYW1lOiBcInRyYW5zcG9ydC1iZWx0XCIsIGNvdW50OiA0fV0pXHJcbklnb3JKcy5zZXRTdGF0aWMoXCJpdGVtU3RhY2tDb3N0LnJlc0Jsb2NrX21pbmVyXCIsIFt7bmFtZTogXCJidXJuZXItbWluaW5nLWRyaWxsXCIsIGNvdW50OiAxfV0pXHJcblxyXG5cclxuY29uc3QgRmFjdG9yeUJsb2NrID0ge31cclxuRmFjdG9yeUJsb2NrLk5ldyA9IChwYXJhbXMsIG5ld09iaiwgSWdvcikgPT4ge1xyXG4gICAgbGV0IGZlYXR1cmVzID0gSWdvci5nZXROYW1lZE9iamVjdChcImdsb2JhbFwiKS5hY3RpdmVGZWF0dXJlcy5mYWN0b3J5QmxvY2tzXHJcbiAgICBuZXdPYmoubmFtZSA9IHBhcmFtcy5uYW1lLnN0cmluZ1xyXG4gICAgbmV3T2JqLnNpemUgPSA1MFxyXG4gICAgbmV3T2JqLmNvbXBsZXhpdHkgPSAxMFxyXG4gICAgbmV3T2JqLmNvbm5lY3Rpb25zID0ge1xyXG4gICAgICAgIHNvdXJjZXM6IFtdXHJcbiAgICAgICAgLGRyYWluczogW11cclxuICAgICAgICAsbWF4U291cmNlczogZmVhdHVyZXMuYmxvY2tzTWF4U291cmNlcyB8fCAxXHJcbiAgICAgICAgLG1heERyYWluczogZmVhdHVyZXMuYmxvY2tzTWF4RHJhaW5zIHx8IDFcclxuICAgIH1cclxuICAgIGxldCBidWZmZXJTZXR0aW5ncyA9IHtcclxuICAgICAgICByZXN0cmljdGFibGU6IHRydWUsXHJcbiAgICAgICAgc3RhY2tzOiAxLFxyXG4gICAgICAgIHN0YWNrU2l6ZTogMTAsXHJcbiAgICB9XHJcbiAgICBuZXdPYmouYnVmZmVycyA9IHt9XHJcbiAgICBuZXdPYmouYnVmZmVycy5pbiA9IElnb3IubmV3Q29tcG9uZW50KFwiZW50aXR5LmJ1ZmZlclwiLCBidWZmZXJTZXR0aW5ncywgbmV3T2JqKVxyXG4gICAgbmV3T2JqLmJ1ZmZlcnMuaW50ZXJuYWwgPSBJZ29yLm5ld0NvbXBvbmVudChcImVudGl0eS5idWZmZXJcIiwgYnVmZmVyU2V0dGluZ3MsIG5ld09iailcclxuICAgIG5ld09iai5idWZmZXJzLm91dCA9IElnb3IubmV3Q29tcG9uZW50KFwiZW50aXR5LmJ1ZmZlclwiLCBidWZmZXJTZXR0aW5ncywgbmV3T2JqKVxyXG4gICAgbmV3T2JqLnByb2Nlc3NpbmdMaXN0ID0ge31cclxuXHJcbiAgICBuZXdPYmouc3ViSWNvbiA9IFwic3RvbmVcIlxyXG4gICAgbmV3T2JqLmZhY3RvcnlMaW5lcyA9IFtdXHJcbiAgICBuZXdPYmouZmFjdG9yeUxpbmVzLnB1c2goXHJcbiAgICAgICAgSWdvci5uZXdDb21wb25lbnQoXCJGYWN0b3J5TGluZVwiLCB7XHJcbiAgICAgICAgICAgIHNvdXJjZTogbmV3T2JqLmJ1ZmZlcnMuaW5cclxuICAgICAgICAgICAgLGRyYWluOiBuZXdPYmouYnVmZmVycy5vdXRcclxuICAgICAgICAgICAgLGludGVybmFsOiBuZXdPYmouYnVmZmVycy5pbnRlcm5hbFxyXG4gICAgICAgICAgICAscGFyZW50OiBuZXdPYmouJF9pZFxyXG4gICAgICAgICAgICAsb3JkZXI6IG5ld09iai5mYWN0b3J5TGluZXMubGVuZ3RoXHJcbiAgICAgICAgfSlcclxuICAgIClcclxuICAgIG5ld09iai4kX3RhZ3MucHVzaChcInRpY2tcIiwgXCJwcm9jZXNzaW5nXCIpXHJcbiAgICByZXR1cm4gW25ld09ial1cclxufVxyXG5GYWN0b3J5QmxvY2suTmV3LnNpZ25hdHVyZSA9IHsgfVxyXG5GYWN0b3J5QmxvY2suTmV3Ll9zaWduYWwgPSBcImdlbmVyYWxVcGRhdGVcIlxyXG5GYWN0b3J5QmxvY2suTmV3Q0NDID0gKHBhcmFtcywgSWdvcikgPT4ge1xyXG4gICAgSWdvci5hZGROZXdPYmplY3QoSWdvci5nZXROYW1lZE9iamVjdChcImdsb2JhbFwiKS5mYWNCbG9ja3MuYmxvY2tzLCBcIkZhY3RvcnlCbG9ja1wiLCBwYXJhbXMpXHJcbn1cclxuRmFjdG9yeUJsb2NrLk5ld0NDQy5zaWduYXR1cmUgPSB7XHJcbiAgICBuYW1lOiBcInN0cmluZ1wiXHJcbn1cclxuRmFjdG9yeUJsb2NrLk5ld0NDQy5DQ19wcm92aWRlID0gXCJmYWNCbG9jay5uZXdCbG9ja1wiXHJcbkZhY3RvcnlCbG9jay5OZXdCdXNDQ0MgPSAocGFyYW1zLCBJZ29yKSA9PiB7XHJcbiAgICBJZ29yLmFkZE5ld09iamVjdChJZ29yLmdldE5hbWVkT2JqZWN0KFwiZ2xvYmFsXCIpLmZhY0Jsb2Nrcy5idXNlcywgXCJGYWN0b3J5QnVzXCIsIHBhcmFtcylcclxufVxyXG5GYWN0b3J5QmxvY2suTmV3QnVzQ0NDLnNpZ25hdHVyZSA9IHtcclxuICAgIG5hbWU6IFwic3RyaW5nXCJcclxufVxyXG5GYWN0b3J5QmxvY2suTmV3QnVzQ0NDLkNDX3Byb3ZpZGUgPSBcImZhY0Jsb2NrLm5ld0J1c1wiXHJcbkZhY3RvcnlCbG9jay5OZXdSZXNCbG9jayA9IChwYXJhbXMsIElnb3IpID0+IHtcclxuICAgIGlmKElnb3IuYWRkTmV3T2JqZWN0KElnb3IuZ2V0TmFtZWRPYmplY3QoXCJnbG9iYWxcIikuZmFjQmxvY2tzLnJlc0Jsb2NrcywgXCJSZXNvdXJjZUJsb2NrXCIsIHBhcmFtcykpIHtcclxuICAgICAgICBJZ29yLmdldE5hbWVkT2JqZWN0KFwiZ2xvYmFsXCIpLmxhbmQucmVzX3BhdGNoZXNfdXNlZCsrXHJcbiAgICB9XHJcbn1cclxuRmFjdG9yeUJsb2NrLk5ld1Jlc0Jsb2NrLnNpZ25hdHVyZSA9IHtcclxuICAgIG5hbWU6IFwic3RyaW5nXCIsICAvL1dJUCBzaG91bGQgYmVjb21lIHJlc291cmNlIHZlaW5cclxufVxyXG5GYWN0b3J5QmxvY2suTmV3UmVzQmxvY2suQ0NfcHJvdmlkZSA9IFwiZmFjQmxvY2submV3UmVzQmxvY2tcIlxyXG5GYWN0b3J5QmxvY2suTmV3VGVjaEJsb2NrID0gKHBhcmFtcywgSWdvcikgPT4ge1xyXG4gICAgSWdvci5hZGROZXdPYmplY3QoSWdvci5nZXROYW1lZE9iamVjdChcImdsb2JhbFwiKS5mYWNCbG9ja3MudGVjaEJsb2NrcywgXCJUZWNoQmxvY2tcIiwgcGFyYW1zKVxyXG59XHJcbkZhY3RvcnlCbG9jay5OZXdUZWNoQmxvY2suc2lnbmF0dXJlID0ge1xyXG4gICAgbmFtZTogXCJzdHJpbmdcIlxyXG59XHJcbkZhY3RvcnlCbG9jay5OZXdUZWNoQmxvY2suQ0NfcHJvdmlkZSA9IFwiZmFjQmxvY2submV3VGVjaEJsb2NrXCJcclxuRmFjdG9yeUJsb2NrLl9fdG9vbHRpcHMgPSAob2JqLCBhcmdzLCByZXRPYmosIElnb3IpID0+IHtcclxuICAgIGxldCB3aG8gPSBJZ29yLmdldElkKG9iaikgfHwgbnVsbFxyXG4gICAgbGV0IGRhdGEgPSBbXVxyXG4gICAgbGV0IHRpcCA9IFwiXCJcclxuICAgIHN3aXRjaChhcmdzLndoaWNoKSB7XHJcbiAgICAgICAgY2FzZSBcInJlc0Jsb2NrXCI6XHJcbiAgICAgICAgICAgIGRhdGEubGFuZENvc3QgPSBcInJlc291cmNlXCJcclxuICAgICAgICAgICAgZGF0YS5jb21wbGV4aXR5ID0gNVxyXG4gICAgICAgICAgICB0aXAgPSBcIk5leHQgUmVzb3VyY2VCbG9ja1wiXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJ0ZWNoQmxvY2tcIjpcclxuICAgICAgICAgICAgZGF0YS5sYW5kQ29zdCA9IDUwXHJcbiAgICAgICAgICAgIGRhdGEuY29tcGxleGl0eSA9IDVcclxuICAgICAgICAgICAgdGlwID0gXCJOZXh0IFRlY2ggQmxvY2tcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiYnVzTGluZVwiOlxyXG4gICAgICAgICAgICBkYXRhLmxhbmRDb3N0ID0gMjVcclxuICAgICAgICAgICAgZGF0YS5jb21wbGV4aXR5ID0gNVxyXG4gICAgICAgICAgICB0aXAgPSBcIk5leHQgQnVzIExpbmVcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZmFjdG9yeUJsb2NrXCI6XHJcbiAgICAgICAgICAgIGRhdGEubGFuZENvc3QgPSA1MFxyXG4gICAgICAgICAgICBkYXRhLmNvbXBsZXhpdHkgPSAxMFxyXG4gICAgICAgICAgICB0aXAgPSBcIk5leHQgRmFjdG9yeSBCbG9ja1wiXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJhZGRMaW5lXCI6XHJcbiAgICAgICAgICAgIGRhdGEubGFuZENvc3QgPSBcIj8/XCJcclxuICAgICAgICAgICAgZGF0YS5jb21wbGV4aXR5ID0gXCI/P1wiXHJcbiAgICAgICAgICAgIHRpcCA9IFwiTmV3IEZhY3RvcnkgTGluZVwiXHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0T2JqLl9yZXN1bHQgPSB7dG9vbDogXCJibG9ja0Nvc3RzXCIsIHRpcCwgZGF0YX1cclxufVxyXG5GYWN0b3J5QmxvY2suX190b29sdGlwcy5DQ191dGlsaXR5ID0gXCJmYWNCbG9jay5fX3Rvb2x0aXBzXCJcclxuRmFjdG9yeUJsb2NrLnRpY2sgPSAob2JqLCB0aWNrRGF0YSwgSWdvcikgPT4ge1xyXG4gICAgLy8gUHJvY2VzcyBJL08gYnVmZmVyc1xyXG4gICAgaWYob2JqLmNvbm5lY3Rpb25zLmRyYWlucykge1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coJ3Byb2Nlc3MgZHJhaW5zOiBwdXNoIG1vZGUnKVxyXG4gICAgfSAgICBcclxufVxyXG5GYWN0b3J5QmxvY2sudGljay5zaWduYXR1cmUgPSB7IH1cclxuRmFjdG9yeUJsb2NrLlNlbGVjdFN1Ykljb24gPSAob2JqLCBwYXJhbXMsIElnb3IpID0+IHtcclxuICAgIG9iai5hdC5mYWN0b3J5QmxvY2suc3ViSWNvbiA9IG9iai53aGljaC5pY29uXHJcbn1cclxuRmFjdG9yeUJsb2NrLlNlbGVjdFN1Ykljb24uc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiZmFjdG9yeUJsb2NrXCIsXHJcbiAgICB3aGljaDogXCJpY29uXCJcclxufVxyXG5GYWN0b3J5QmxvY2suU2VsZWN0U3ViSWNvbi5DQ19wcm92aWRlID0gXCJmYWN0b3J5QmxvY2suc2VsZWN0U3ViSWNvblwiXHJcbkZhY3RvcnlCbG9jay5Db25zdW1lU3RhY2tzID0gKHRhcmdldCwgYXJncywgcmV0dXJuT2JqLCBJZ29yKSA9PiB7XHJcbiAgICAvL1dJUFxyXG4gICAgbGV0IGNvbnN1bWFibGUgPSBhcmdzLml0ZW1TdGFja3MucmVkdWNlKCAoYWNjdW1fbXVsdGksIHgpID0+IHtcclxuICAgICAgICBpZihhY2N1bV9tdWx0aT09LTEpIHJldHVybiAtMVxyXG4gICAgICAgIGxldCBhdmFpbCA9IElnb3IucHJvY2Vzc1RFTVAoSWdvci5nZXRJZCh0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeC5uYW1lXS5hdCkuaXRlbXMsIFwiaW52ZW50b3J5LnRvdGFsXCIsIHtuYW1lOiB4Lm5hbWV9KVxyXG4gICAgICAgIHJldHVybiBhdmFpbDx4LmFtb3VudCA/IC0xIDogTWF0aC5taW4oYWNjdW1fbXVsdGksIE1hdGguZmxvb3IoYXZhaWwveC5hbW91bnQpKVxyXG4gICAgfSwgYXJncy5tdWx0aSlcclxuICAgIGlmKGNvbnN1bWFibGU+PTEpIHtcclxuICAgICAgICBhcmdzLml0ZW1TdGFja3MuZm9yRWFjaCggKHgpID0+IHtcclxuICAgICAgICAgICAgSWdvci5wcm9jZXNzVEVNUChJZ29yLmdldElkKHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4Lm5hbWVdLmF0KSwgXCJpbnZlbnRvcnkuY29uc3VtZVwiLCB7aXRlbVN0YWNrczogeCwgbXVsdGk6IGNvbnN1bWFibGV9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICByZXR1cm5PYmouX3Jlc3VsdCA9IGNvbnN1bWFibGVcclxufVxyXG5GYWN0b3J5QmxvY2suQ29uc3VtZVN0YWNrcy5zaWduYXR1cmUgPSB7fVxyXG5GYWN0b3J5QmxvY2suQ29uc3VtZVN0YWNrcy5JZ29yX29wZXJhdGlvbiA9IFwiZmFjdG9yeUJsb2NrLmNvbnN1bWVTdGFja3NcIlxyXG5GYWN0b3J5QmxvY2suUHJvZHVjZVN0YWNrcyA9ICh0YXJnZXQsIGFyZ3MsIHJldHVybk9iaiwgSWdvcikgPT4ge1xyXG4gICAgbGV0IGRlcG9zaXRhYmxlID0gYXJncy5pdGVtU3RhY2tzLnJlZHVjZSggKGFjY3VtX211bHRpLCB4KSA9PiB7XHJcbiAgICAgICAgaWYoYWNjdW1fbXVsdGk9PS0xKSByZXR1cm4gLTEgLy9TaG9ydGNpcmN1aXRcclxuICAgICAgICBsZXQgYnVmZmVyID0gSWdvci5nZXRJZCh0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeC5uYW1lXS5hdClcclxuICAgICAgICBsZXQgYXZhaWwgPSBidWZmZXIuc3RhY2tTaXplIC0gSWdvci5wcm9jZXNzVEVNUChidWZmZXIuaXRlbXMsIFwiaW52ZW50b3J5LnRvdGFsXCIsIHtuYW1lOiB4Lm5hbWV9KVxyXG4gICAgICAgIHJldHVybiBhdmFpbDx4LmFtb3VudCA/IC0xIDogTWF0aC5taW4oYWNjdW1fbXVsdGksIE1hdGguZmxvb3IoYXZhaWwveC5hbW91bnQpKVxyXG4gICAgfSwgYXJncy5tdWx0aSlcclxuICAgIGlmKGRlcG9zaXRhYmxlPj0xKSB7XHJcbiAgICAgICAgYXJncy5pdGVtU3RhY2tzLmZvckVhY2goICh4KSA9PiB7XHJcbiAgICAgICAgICAgIElnb3IucHJvY2Vzc1RFTVAoSWdvci5nZXRJZCh0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeC5uYW1lXS5hdCksIFwiaW52ZW50b3J5LmFkZFwiLCB7aXRlbVN0YWNrczogeCwgbXVsdGk6IGRlcG9zaXRhYmxlfSlcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmV0dXJuT2JqLl9yZXN1bHQgPSBkZXBvc2l0YWJsZVxyXG59XHJcbkZhY3RvcnlCbG9jay5Qcm9kdWNlU3RhY2tzLnNpZ25hdHVyZSA9IHtcclxuXHJcbn1cclxuRmFjdG9yeUJsb2NrLlByb2R1Y2VTdGFja3MuSWdvcl9vcGVyYXRpb24gPSBcImZhY3RvcnlCbG9jay5wcm9kdWNlU3RhY2tzXCJcclxuRmFjdG9yeUJsb2NrLlNldENvbm5lY3Rpb24gPSAgKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgbGV0IGNhbGxGbiA9IG9iai5kaXIuc3RyaW5nPT1cInNvdXJjZVwiID8gXCJEcmFpblwiIDogXCJTb3VyY2VcIlxyXG4gICAgaWYob2JqLmF0LmZhY3RvcnlCbG9jay5jb25uZWN0aW9uc1tvYmouZGlyLnN0cmluZysncyddPT0gb2JqLnRvX3doaWNoLmZhY3RvcnlCdXMpIHtcclxuICAgICAgICBJZ29yLnByb2Nlc3NURU1QKG9iai50b193aGljaC5mYWN0b3J5QnVzLCBcImZhY3RvcnlCdXMuY2xlYXJcIitjYWxsRm4sIHt3aG86IG9iai5hdC5mYWN0b3J5QmxvY2suJF9pZH0pXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbiAgICAvL0NsZWFyIHByaW9yIGNvbm5lY3Rpb25cclxuICAgIC8vQ2FuIGV4ZWN1dGUgb24gZmFjdG9yeUJ1cy4uLlxyXG4gICAgaWYoSWdvci5wcm9jZXNzVEVNUChvYmoudG9fd2hpY2guZmFjdG9yeUJ1cywgXCJmYWN0b3J5QnVzLmFkZFwiK2NhbGxGbiwge3dobzogb2JqLmF0LmZhY3RvcnlCbG9jay4kX2lkfSkgKSB7XHJcbiAgICAgICAgb2JqLmF0LmZhY3RvcnlCbG9jay5jb25uZWN0aW9uc1tvYmouZGlyLnN0cmluZysncyddID0gb2JqLnRvX3doaWNoLmZhY3RvcnlCdXNcclxuICAgIH1cclxuICAgIElnb3IucHJvY2Vzc1RFTVAob2JqLnRvX3doaWNoLmZhY3RvcnlCdXMsIFwiZmFjdG9yeUJ1cy5jb25uZWN0VG9cIiwge30pXHJcbn1cclxuRmFjdG9yeUJsb2NrLlNldENvbm5lY3Rpb24uc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiZmFjdG9yeUJsb2NrXCIsXHJcbiAgICB0b193aGljaDogXCJmYWN0b3J5QnVzXCIsXHJcbiAgICBkaXI6IFwic3RyaW5nXCJcclxufVxyXG5GYWN0b3J5QmxvY2suU2V0Q29ubmVjdGlvbi5DQ19wcm92aWRlID0gXCJmYWN0b3J5QmxvY2suc2V0Q29ubmVjdGlvblwiXHJcblxyXG5GYWN0b3J5QmxvY2suQWRkRmFjdG9yeUxpbmUgPSAob2JqLCBJZ29yKSA9PiB7XHJcbiAgICAvLyBvYmouYXQuZmFjdG9yeUJsb2NrLmNvbXBsZXhpdHlcclxuICAgIC8vIEludmVudG9yeS5jb25zdW1lIHNvbWUgY29zdFxyXG4gICAgb2JqLmF0LmZhY3RvcnlCbG9jay5mYWN0b3J5TGluZXMucHVzaChcclxuICAgICAgICBJZ29yLm5ld0NvbXBvbmVudChcIkZhY3RvcnlMaW5lXCIsIHtcclxuICAgICAgICAgICAgc291cmNlOiBvYmouYXQuZmFjdG9yeUJsb2NrLmJ1ZmZlcnMuaW5cclxuICAgICAgICAgICAgLGRyYWluOiBvYmouYXQuZmFjdG9yeUJsb2NrLmJ1ZmZlcnMub3V0XHJcbiAgICAgICAgICAgICxpbnRlcm5hbDogb2JqLmF0LmZhY3RvcnlCbG9jay5idWZmZXJzLmludGVybmFsXHJcbiAgICAgICAgICAgICxwYXJlbnQ6IG9iai5hdC5mYWN0b3J5QmxvY2suJF9pZFxyXG4gICAgICAgICAgICAsb3JkZXI6IG9iai5hdC5mYWN0b3J5QmxvY2suZmFjdG9yeUxpbmVzLmxlbmd0aCB8fCAwXHJcbiAgICAgICAgfSlcclxuICAgIClcclxuICAgIC8vIG9iai5hdC5mYWN0b3J5QmxvY2suY29tcGxleGl0eSsrXHJcbiAgICBJZ29yLnZpZXcuc2lnbmFsZXIuc2lnbmFsKFwiZ2VuZXJhbFVwZGF0ZVwiKVxyXG59XHJcbkZhY3RvcnlCbG9jay5BZGRGYWN0b3J5TGluZS5zaWduYXR1cmUgPSB7XHJcbiAgICBhdDogXCJmYWN0b3J5QmxvY2tcIlxyXG59XHJcbkZhY3RvcnlCbG9jay5BZGRGYWN0b3J5TGluZS5DQ19wcm92aWRlID0gXCJmYWN0b3J5QmxvY2suYWRkTGluZVwiXHJcbkZhY3RvcnlCbG9jay5TZXRQcm9jZXNzSXRlbXMgPSAodGFyZ2V0LCBhcmdzLCByZXR1cm5PYmosIElnb3IpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKCdzZXQgcHJvY2VzcycpXHJcbiAgICBhcmdzLmxpc3RzLmNvbnN1bWUuZm9yRWFjaCggKHgpID0+IHtcclxuICAgICAgICBpZighdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XSA9IHthdDogdGFyZ2V0LmJ1ZmZlcnMuaW4sIGNvbnN1bWU6IFthcmdzLmxpc3RJZF19XHJcbiAgICAgICAgfSBlbHNlIGlmKHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdCA9PSB0YXJnZXQuYnVmZmVycy5pbnRlcm5hbCkge1xyXG4gICAgICAgICAgICB0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF0uY29uc3VtZS5wdXNoKGFyZ3MubGlzdElkKVxyXG4gICAgICAgIH0gZWxzZSBpZih0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF0uYXQgPT0gdGFyZ2V0LmJ1ZmZlcnMub3V0KSB7XHJcbiAgICAgICAgICAgIC8vIE1vdmUgdG8gaW50ZXJuYWxcclxuICAgICAgICAgICAgdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdLmF0ID0gdGFyZ2V0LmJ1ZmZlcnMuaW50ZXJuYWxcclxuICAgICAgICAgICAgdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdLmNvbnN1bWUgPSBbXVxyXG4gICAgICAgICAgICB0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF0uY29uc3VtZS5wdXNoKGFyZ3MubGlzdElkKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8veCBpcyBmb3VuZCBhbmQgYXQgaW5wdXQgYWxyZWFkeVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBhcmdzLmxpc3RzLnByb2R1Y2UuZm9yRWFjaCggKHgpID0+IHtcclxuICAgICAgICBpZighdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XSA9IHthdDogdGFyZ2V0LmJ1ZmZlcnMub3V0LCBwcm9kdWNlOiBbYXJncy5saXN0SWRdfVxyXG4gICAgICAgIH0gZWxzZSBpZih0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF0uYXQ9PXRhcmdldC5idWZmZXJzLmludGVybmFsKSB7XHJcbiAgICAgICAgICAgIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5wcm9kdWNlLnB1c2goYXJncy5saXN0SWQpXHJcbiAgICAgICAgfSBlbHNlIGlmKHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdD09dGFyZ2V0LmJ1ZmZlcnMuaW4pIHtcclxuICAgICAgICAgICAgLy9tb3ZlIGl0XHJcbiAgICAgICAgICAgIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdCA9IHRhcmdldC5idWZmZXJzLmludGVybmFsXHJcbiAgICAgICAgICAgIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5wcm9kdWNlID0gW11cclxuICAgICAgICAgICAgdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdLnByb2R1Y2UucHVzaChhcmdzLmxpc3RJZClcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgLy9UT0RPIHRoaXMgZG9lc24ndCByZXNwZWN0IHN0YWNrIGxpbWl0cyBvbiB0aGUgYnVmZmVyc1xyXG4gICAgSWdvci5wcm9jZXNzVEVNUCh0YXJnZXQuYnVmZmVycy5pbiwgXCJidWZmZXIucmVzdHJpY3RMaXN0XCIsIHtsaXN0OiBPYmplY3Qua2V5cyh0YXJnZXQucHJvY2Vzc2luZ0xpc3QpLmZpbHRlcigoeCk9PiB7cmV0dXJuIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdD09dGFyZ2V0LmJ1ZmZlcnMuaW59KX0pXHJcbiAgICBJZ29yLnByb2Nlc3NURU1QKHRhcmdldC5idWZmZXJzLmludGVybmFsLCBcImJ1ZmZlci5yZXN0cmljdExpc3RcIiwge2xpc3Q6IE9iamVjdC5rZXlzKHRhcmdldC5wcm9jZXNzaW5nTGlzdCkuZmlsdGVyKCh4KT0+IHtyZXR1cm4gdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdLmF0PT10YXJnZXQuYnVmZmVycy5pbnRlcm5hbH0pfSlcclxuICAgIElnb3IucHJvY2Vzc1RFTVAodGFyZ2V0LmJ1ZmZlcnMub3V0LCBcImJ1ZmZlci5yZXN0cmljdExpc3RcIiwge2xpc3Q6IE9iamVjdC5rZXlzKHRhcmdldC5wcm9jZXNzaW5nTGlzdCkuZmlsdGVyKCh4KT0+IHtyZXR1cm4gdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdLmF0PT10YXJnZXQuYnVmZmVycy5vdXR9KX0pXHJcbn1cclxuRmFjdG9yeUJsb2NrLlNldFByb2Nlc3NJdGVtcy5JZ29yX29wZXJhdGlvbiA9IFwiZmFjdG9yeUJsb2NrLnNldFByb2Nlc3NJdGVtc1wiXHJcbkZhY3RvcnlCbG9jay5DbGVhclByb2Nlc3NJdGVtcyA9ICh0YXJnZXQsIGFyZ3MsIHJldHVybk9iaiwgSWdvcikgPT4ge1xyXG4gICAgYXJncy5saXN0cy5jb25zdW1lLmZvckVhY2goICh4KSA9PiB7XHJcbiAgICAgICAgbGV0IHdoaWNoID0gdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdXHJcbiAgICAgICAgd2hpY2guY29uc3VtZS5zcGxpY2Uod2hpY2guY29uc3VtZS5pbmRleE9mKGFyZ3MubGlzdElkKSwxKVxyXG4gICAgICAgIGlmKHdoaWNoLmNvbnN1bWUubGVuZ3RoPT0wKSB7XHJcbiAgICAgICAgICAgIGlmKHdoaWNoLmF0PT10YXJnZXQuYnVmZmVycy5pbnRlcm5hbCAmJiB3aGljaC5wcm9kdWNlPy5sZW5ndGg+MCkge1xyXG4gICAgICAgICAgICAgICAgd2hpY2guYXQgPSB0YXJnZXQuYnVmZmVycy5vdXRcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbiAgICBhcmdzLmxpc3RzLnByb2R1Y2UuZm9yRWFjaCggKHgpID0+IHtcclxuICAgICAgICBsZXQgd2hpY2ggPSB0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF1cclxuICAgICAgICB3aGljaC5wcm9kdWNlLnNwbGljZSh3aGljaC5wcm9kdWNlLmluZGV4T2YoYXJncy5saXN0SWQpLDEpXHJcbiAgICAgICAgaWYod2hpY2gucHJvZHVjZS5sZW5ndGg9PTApIHtcclxuICAgICAgICAgICAgaWYod2hpY2guYXQ9PXRhcmdldC5idWZmZXJzLmludGVybmFsICYmIHdoaWNoLmNvbnN1bWU/Lmxlbmd0aD4wKSB7XHJcbiAgICAgICAgICAgICAgICB3aGljaC5hdCA9IHRhcmdldC5idWZmZXJzLmluXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGFyZ2V0LnByb2Nlc3NpbmdMaXN0W3hdXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG4gICAgSWdvci5wcm9jZXNzVEVNUChJZ29yLmdldElkKHRhcmdldC5idWZmZXJzLmluKSwgXCJidWZmZXIucmVzdHJpY3RMaXN0XCIsIHtsaXN0OiBPYmplY3Qua2V5cyh0YXJnZXQucHJvY2Vzc2luZ0xpc3QpLmZpbHRlcigoeCk9PiB7cmV0dXJuIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdD09XCJpblwifSl9KVxyXG4gICAgSWdvci5wcm9jZXNzVEVNUChJZ29yLmdldElkKHRhcmdldC5idWZmZXJzLmludGVybmFsKSwgXCJidWZmZXIucmVzdHJpY3RMaXN0XCIsIHtsaXN0OiBPYmplY3Qua2V5cyh0YXJnZXQucHJvY2Vzc2luZ0xpc3QpLmZpbHRlcigoeCk9PiB7cmV0dXJuIHRhcmdldC5wcm9jZXNzaW5nTGlzdFt4XS5hdD09XCJpbnRlcm5hbFwifSl9KVxyXG4gICAgSWdvci5wcm9jZXNzVEVNUChJZ29yLmdldElkKHRhcmdldC5idWZmZXJzLm91dCksIFwiYnVmZmVyLnJlc3RyaWN0TGlzdFwiLCB7bGlzdDogT2JqZWN0LmtleXModGFyZ2V0LnByb2Nlc3NpbmdMaXN0KS5maWx0ZXIoKHgpPT4ge3JldHVybiB0YXJnZXQucHJvY2Vzc2luZ0xpc3RbeF0uYXQ9PVwib3V0XCJ9KX0pXHJcbn1cclxuRmFjdG9yeUJsb2NrLkNsZWFyUHJvY2Vzc0l0ZW1zLklnb3Jfb3BlcmF0aW9uID0gXCJmYWN0b3J5QmxvY2suY2xlYXJQcm9jZXNzSXRlbXNcIlxyXG5JZ29ySnMuZGVmaW5lT2JqKFwiRmFjdG9yeUJsb2NrXCIsIEZhY3RvcnlCbG9jay5OZXcsIEZhY3RvcnlCbG9jaylcclxuXHJcbi8qXHJcbiAgICBGYWN0b3J5IExpbmVcclxuKi9cclxuY29uc3QgRmFjdG9yeUxpbmUgPSB7fVxyXG5GYWN0b3J5TGluZS5OZXcgPSAocGFyYW1zLCBuZXdPYmosIElnb3IpID0+IHtcclxuICAgIG5ld09iai5wcmVwcGVkID0gMFxyXG4gICAgbmV3T2JqLmJ1aWx0ID0gMFxyXG4gICAgbmV3T2JqLmJ1aWxkaW5nVHlwZSA9IG51bGxcclxuICAgIG5ld09iai5yZWNpcGUgPSBudWxsXHJcbiAgICBuZXdPYmouaXRlbVRhcmdldHMgPSBudWxsXHJcbiAgICBuZXdPYmoucHJvY2Vzc2luZ190aW1lID0gLTFcclxuICAgIG5ld09iai5jb25uZWN0aW9ucyA9IHtcclxuICAgICAgICBzb3VyY2U6IHBhcmFtcy5zb3VyY2UsXHJcbiAgICAgICAgZHJhaW46IHBhcmFtcy5kcmFpbixcclxuICAgICAgICBpbnRlcm5hbDogcGFyYW1zLmludGVybmFsXHJcbiAgICB9XHJcbiAgICBuZXdPYmoub3JkZXIgPSBwYXJhbXMub3JkZXJcclxuICAgIG5ld09iai4kX3BhcmVudCA9IHBhcmFtcy5wYXJlbnRcclxuICAgIHJldHVybiBbbmV3T2JqXVxyXG59XHJcbkZhY3RvcnlMaW5lLk5ldy5zaWduYXR1cmUgPSB7XHJcbiAgICBzb3VyY2U6ICdlbnRpdHkuYnVmZmVyJyxcclxuICAgIGRyYWluOiAnZW50aXR5LmJ1ZmZlcicsXHJcbiAgICBpbnRlcm5hbDogJ2VudGl0eS5idWZmZXInXHJcbn1cclxuRmFjdG9yeUxpbmUuTmV3Ll9zaWduYWwgPSBcImdlbmVyYWxVcGRhdGVcIlxyXG5GYWN0b3J5TGluZS5fX2RlbGV0ZSA9IChvYmosIElnb3IpID0+IHtcclxuICAgIG9iai4kX3RhZ3MuZGVsZXRlKFwidGlja1wiKVxyXG4gICAgSWdvci5wcm9jZXNzVEVNUChcInBsYXllci5pbnZlbnRvcnlcIiwgXCJpbnZlbnRvcnkuYWRkXCIsIHtpdGVtU3RhY2tzOiB7bmFtZTogb2JqLmJ1aWxkaW5nVHlwZSwgY291bnQ6IG9iai5idWlsdH19KVxyXG4gICAgbGV0IGZvdW5kYXRpb24gPSBJZ29yLnByb2Nlc3NURU1QKG9iaiwgXCJmYWN0b3J5TGluZS50b29sVGlwc1wiLCB7d2hpY2g6IFwiZm91bmRhdGlvblwifSkuZGF0YVxyXG4gICAgSWdvci5wcm9jZXNzVEVNUChcInBsYXllci5pbnZlbnRvcnlcIiwgXCJpbnZlbnRvcnkuYWRkXCIsIHtpdGVtU3RhY2tzOiBmb3VuZGF0aW9uLCBtdWx0aTogb2JqLmJ1aWx0K29iai5wcmVwcGVkfSlcclxuICAgIGlmKG9iai5wcm9jZXNzaW5nX2NvdW50KSB7XHJcbiAgICAgICAgSWdvci5wcm9jZXNzVEVNUChcInBsYXllci5pbnZlbnRvcnlcIiwgXCJpbnZlbnRvcnkuYWRkXCIsIHtpdGVtU3RhY2tzOiBvYmoucmVzY2lwZS5pbmdyZWRpZW50cywgbXVsdGk6IG9iai5wcm9jZXNzaW5nX2NvdW50fSlcclxuICAgIH1cclxuICAgIGxldCBwYXJlbnQgPSBJZ29yLmdldElkKG9iai4kX3BhcmVudClcclxuICAgIGxldCBpZHggPSBwYXJlbnQuZmFjdG9yeUxpbmVzLmluZGV4T2Yob2JqLiRfaWQpXHJcbiAgICBwYXJlbnQuZmFjdG9yeUxpbmVzLnNwbGljZShpZHgsIDEpXHJcbiAgICAvL1RPRE8gYWRqdXN0IGxhbmQgdXNlIGFuZCBjb21wbGV4aXR5XHJcbiAgICBJZ29yLnZpZXcuc2lnbmFsZXIuc2lnbmFsKFwiZ2VuZXJhbFVwZGF0ZVwiKVxyXG59XHJcbkZhY3RvcnlMaW5lLl9fZGVsZXRlLklnb3Jfb3BlcmF0aW9uID0gXCJGYWN0b3J5TGluZS5kZWxldGVcIlxyXG5GYWN0b3J5TGluZS5TZXRUeXBlID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgb2JqLmF0LmZhY3RvcnlMaW5lLmJ1aWxkaW5nVHlwZSA9IG9iai53aGljaC5idWlsZGluZy5uYW1lXHJcbiAgICBvYmouYXQuZmFjdG9yeUxpbmUuY3JhZnRpbmdfY2F0ZWdvcmllcyA9IG9iai53aGljaC5idWlsZGluZy5jcmFmdGluZ19jYXRlZ29yaWVzXHJcbiAgICAvL0NyZWF0ZSBMb29rdXAgYnkgYnVpbGRpbmcgdHlwZVxyXG4gICAgb2JqLmF0LmZhY3RvcnlMaW5lLmZvdW5kYXRpb25Db3N0ID0gW1xyXG4gICAgICAgIHtuYW1lOiBcInN0b25lXCIsIGNvdW50OiA1fVxyXG4gICAgXVxyXG59XHJcbkZhY3RvcnlMaW5lLlNldFR5cGUuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFtcImZhY3RvcnlMaW5lXCIsIFwiZmFjdG9yeUJsb2NrXCJdLFxyXG4gICAgd2hpY2g6IFwiYnVpbGRpbmdcIlxyXG59XHJcbkZhY3RvcnlMaW5lLlNldFR5cGUuQ0NfcHJvdmlkZSA9IFwiZmFjdG9yeUxpbmUuc2V0QnVpbGRpbmdcIlxyXG5GYWN0b3J5TGluZS5QcmVwID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgaWYoIW9iai5hdC5mYWN0b3J5TGluZS5mb3VuZGF0aW9uQ29zdCkgcmV0dXJuXHJcbiAgICBpZihJZ29yLnByb2Nlc3NURU1QKG9iai5wbGF5ZXIuaW52ZW50b3J5LCBcImludmVudG9yeS5jb25zdW1lXCIsIHtpdGVtU3RhY2tzOiBvYmouYXQuZmFjdG9yeUxpbmUuZm91bmRhdGlvbkNvc3R9KSkge1xyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS5wcmVwcGVkKytcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUJsb2NrLnNpemUgKz0xMCAgLy8jIG1hZ2ljIG51bWJlclxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QmxvY2suY29tcGxleGl0eSArPSA1ICAvLyMgbWFnaWMgbnVtYmVyXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIElnb3Iudmlldy53YXJuVG9hc3QoXCJDYW5ub3QgY29uc3VtZSBmb3VuZGF0aW9uIGNvc3RzXCIpXHJcbiAgICB9XHJcbn1cclxuRmFjdG9yeUxpbmUuUHJlcC5zaWduYXR1cmUgPSB7XHJcbiAgICBhdDogW1wiZmFjdG9yeUxpbmVcIiwgXCJmYWN0b3J5QmxvY2tcIl0sXHJcbiAgICBwbGF5ZXI6IFwiaW52ZW50b3J5XCJcclxufVxyXG5GYWN0b3J5TGluZS5QcmVwLkNDX3Byb3ZpZGUgPSBcImZhY3RvcnlMaW5lLnByZXBcIlxyXG5GYWN0b3J5TGluZS5FeHBhbmQgPSAob2JqLCBJZ29yKSA9PiB7XHJcbiAgICBpZihvYmouYXQuZmFjdG9yeUxpbmUucHJlcHBlZD09MCkgcmV0dXJuXHJcbiAgICBpZihJZ29yLnByb2Nlc3NURU1QKG9iai5wbGF5ZXIuaW52ZW50b3J5LCBcImludmVudG9yeS5jb25zdW1lXCIsIHtpdGVtU3RhY2tzOiB7bmFtZTogb2JqLmF0LmZhY3RvcnlMaW5lLmJ1aWxkaW5nVHlwZSwgY291bnQ6IDF9fSkpIHtcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUxpbmUuYnVpbHQrK1xyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS5wcmVwcGVkLS1cclxuICAgICAgICBpZihvYmouYXQuZmFjdG9yeUxpbmUucmVjaXBlKSB7XHJcbiAgICAgICAgICAgIGlmKE51bWJlci5pc0ludGVnZXIob2JqLmF0LmZhY3RvcnlMaW5lLnByb2Nlc3NpbmdfdGlja3MpKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29uc3VtZWQgPSBJZ29yLnByb2Nlc3NURU1QKG9iai5hdC5mYWN0b3J5QmxvY2ssIFwiZmFjdG9yeUJsb2NrLmNvbnN1bWVTdGFja3NcIiwge2l0ZW1TdGFja3M6IG9iai5hdC5mYWN0b3J5TGluZS5yZWNpcGUuaW5ncmVkaWVudHMsIG11bHRpOiAxfSlcclxuICAgICAgICAgICAgICAgIGlmKGNvbnN1bWVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JqLmF0LmZhY3RvcnlMaW5lLnByb2Nlc3NpbmdfdGlja3MgKj0gKG9iai5hdC5mYWN0b3J5TGluZS5idWlsdC0xKS9vYmouYXQuZmFjdG9yeUxpbmUuYnVpbHRcclxuICAgICAgICAgICAgICAgICAgICBvYmouYXQuZmFjdG9yeUxpbmUucHJvY2Vzc2luZ19jb3VudCsrXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb2JqLmF0LmZhY3RvcnlMaW5lLiRfdGFncy5wdXNoKFwidGlja1wiLCBcInByb2Nlc3NpbmdcIilcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIElnb3Iudmlldy53YXJuVG9hc3QoXCJCdWlsZGluZyBub3QgaW4gaW52ZW50b3J5XCIpXHJcbiAgICB9XHJcbn1cclxuRmFjdG9yeUxpbmUuRXhwYW5kLnNpZ25hdHVyZSA9IHtcclxuICAgIGF0OiBbXCJmYWN0b3J5TGluZVwiLCBcImZhY3RvcnlCbG9ja1wiXSxcclxuICAgIHBsYXllcjogJ2ludmVudG9yeSdcclxufVxyXG5GYWN0b3J5TGluZS5FeHBhbmQuQ0NfcHJvdmlkZSA9IFwiZmFjdG9yeUxpbmUuYWRkQnVpbGRpbmdcIlxyXG5cclxuLypcclxuKi9cclxuRmFjdG9yeUxpbmUuU2V0UmVjaXBlID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgaWYob2JqLmF0LmZhY3RvcnlMaW5lLnJlY2lwZSkge1xyXG4gICAgICAgIGlmKG9iai5hdC5mYWN0b3J5TGluZS5yZWNpcGUhPT1vYmoud2hpY2gucmVjaXBlKSB7XHJcbiAgICAgICAgSWdvci5wcm9jZXNzVEVNUChcclxuICAgICAgICAgICAgb2JqLmF0LmZhY3RvcnlCbG9ja1xyXG4gICAgICAgICAgICAsXCJmYWN0b3J5QmxvY2suY2xlYXJQcm9jZXNzSXRlbXNcIlxyXG4gICAgICAgICAgICAse2xpc3RzOiBvYmouYXQuZmFjdG9yeUxpbmUucHJvY2Vzc0xpc3R9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS5yZWNpcGUgPSBudWxsXHJcbiAgICAgICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS4kX3RhZ3MuZGVsZXRlKFwidGlja1wiKVxyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsZXQgcmVjaXBlID0gSWdvci5kYXRhLnJlY2lwZVtvYmoud2hpY2gucmVjaXBlXVxyXG4gICAgbGV0IGxpc3RzID0ge2NvbnN1bWU6IHJlY2lwZS5pbmdyZWRpZW50cy5tYXAoIHggPT4geC5uYW1lKSwgcHJvZHVjZTogcmVjaXBlLnJlc3VsdHMubWFwKCB4ID0+IHgubmFtZSl9XHJcbiAgICBsZXQgRkJfc2V0ID0gSWdvci5wcm9jZXNzVEVNUChcclxuICAgICAgICAgICAgICAgICAgICBvYmouYXQuZmFjdG9yeUJsb2NrXHJcbiAgICAgICAgICAgICAgICAgICAgLFwiZmFjdG9yeUJsb2NrLnNldFByb2Nlc3NJdGVtc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHtsaXN0cywgbGlzdElkOiBvYmouYXQuZmFjdG9yeUxpbmUuJF9pZH0pXHJcbiAgICBpZihGQl9zZXQpIHtcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUxpbmUucHJvY2Vzc0xpc3QgPSBsaXN0c1xyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS5yZWNpcGUgPSByZWNpcGUgLy8gc3RvcmUgZnVsbCBvYmplY3QsIG5vdCBhcmd1bWVudCBmcm9tIG9iai53aGljaC5yZWNpcGVcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUxpbmUucHJvY2Vzc2luZ190aW1lID0gcmVjaXBlLmNyYWZ0aW5nX3NwZWVkIC8gSWdvci5kYXRhLmVudGl0eVtvYmouYXQuZmFjdG9yeUxpbmUuYnVpbGRpbmdUeXBlXS5jcmFmdGluZ19zcGVlZCAqIElnb3IuZ2V0U3RhdGljKFwiY29uZmlnLlRJQ0tTX1BFUl9TRUNPTkRcIilcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUxpbmUucHJvY2Vzc2luZ190aWNrcyA9IE5hTlxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5TGluZS5idWlsdCAmJiBvYmouYXQuZmFjdG9yeUxpbmUuJF90YWdzLnB1c2goXCJ0aWNrXCIsIFwicHJvY2Vzc2luZ1wiKVxyXG4gICAgICAgIC8vSnVzdCB3YWl0IHRpbGwgbmV4dCB0aWNrIHRvIHN0YXJ0IHByb2Nlc3NpbmcgdGhlIHJlY2lwZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWN0b3J5IEJsb2NrIHNldCBmYWlsZWQuLi5cclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3Qgc2V0IG15IGl0ZW1zIG9uIHRoZSBwYXJlbnQgZmFjdG9yeUJsb2NrXCIpXHJcbiAgICAgICAgZGVidWdnZXJcclxuICAgIH1cclxufVxyXG5GYWN0b3J5TGluZS5TZXRSZWNpcGUuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFtcImZhY3RvcnlMaW5lXCIsIFwiZmFjdG9yeUJsb2NrXCJdLFxyXG4gICAgd2hpY2g6IFwicmVjaXBlXCIsXHJcbiAgICBwbGF5ZXI6IFwiaW52ZW50b3J5XCJcclxufVxyXG5GYWN0b3J5TGluZS5TZXRSZWNpcGUuQ0NfcHJvdmlkZSA9IFwiZmFjdG9yeUxpbmUuc2V0UmVjaXBlXCJcclxuRmFjdG9yeUxpbmUuX190b29sdGlwcyA9IChvYmosIGFyZ3MsIHJldCwgSWdvcikgPT4ge1xyXG4gICAgbGV0IHdobyA9IElnb3IuZ2V0SWQob2JqKVxyXG4gICAgbGV0IGRhdGEgPSBbXVxyXG4gICAgbGV0IHRpcCA9IFwiXCJcclxuICAgIHN3aXRjaChhcmdzLndoaWNoKSB7XHJcbiAgICAgICAgY2FzZSBcImZvdW5kYXRpb25cIjpcclxuICAgICAgICAgICAgZGF0YS5wdXNoKHtuYW1lOiBcInN0b25lXCIsIGNvdW50OiA1fSlcclxuICAgICAgICAgICAgdGlwID0gXCJGb3VuZGF0aW9uIENvc3RcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuICAgIHJldC5fcmVzdWx0ID0ge3Rvb2w6IFwic3RhY2tBcnJheVwiLCB0aXAsIGRhdGF9XHJcbn1cclxuRmFjdG9yeUxpbmUuX190b29sdGlwcy5JZ29yX29wZXJhdGlvbiA9IFwiZmFjdG9yeUxpbmUudG9vbFRpcHNcIlxyXG5GYWN0b3J5TGluZS5fX3Rvb2x0aXBzLkNDX3V0aWxpdHkgPSBcImZhY3RvcnlMaW5lLnRvb2xUaXBzXCJcclxuRmFjdG9yeUxpbmUudGljayA9IChlbnRpdHksIHRpY2tkYXRhLCBJZ29yKSA9PiB7XHJcbiAgICBpZihlbnRpdHkuYnVpbHQ9PTAgfHwgIWVudGl0eS5wcm9jZXNzaW5nX3RpbWUgfHwgIWVudGl0eS5yZWNpcGUpIHJldHVybiAgLy9UT0RPIHR1cm4gdGhpcyBpbnRvIGFuIFwiYW50aS10aWNrXCIgdGFnXHJcbiAgICAvL2NvbnN1bWUgZnJvbSBidWZmZXJzIGlmIGVtcHR5XHJcbiAgICBpZihlbnRpdHkuZGVsYXkpIHtcclxuICAgICAgICBpZigtLWVudGl0eS5kZWxheT09MCkge1xyXG4gICAgICAgICAgICBlbnRpdHkuZGVsYXkgPSBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG4gICAgaWYoTnVtYmVyLmlzTmFOKGVudGl0eS5wcm9jZXNzaW5nX3RpY2tzKSkge1xyXG5cclxuICAgICAgICBsZXQgY29uc3VtZWQgPSBJZ29yLnByb2Nlc3NURU1QKGVudGl0eS4kX3BhcmVudCwgXCJmYWN0b3J5QmxvY2suY29uc3VtZVN0YWNrc1wiLCB7aXRlbVN0YWNrczogZW50aXR5LnJlY2lwZS5pbmdyZWRpZW50cywgbXVsdGk6IGVudGl0eS5idWlsdH0pXHJcbiAgICAgICAgaWYoY29uc3VtZWQ+IDApIHtcclxuICAgICAgICAgICAgZW50aXR5LnByb2Nlc3NpbmdfdGlja3MgPSAwXHJcbiAgICAgICAgICAgIGVudGl0eS5wcm9jZXNzaW5nX2NvdW50ID0gY29uc3VtZWRcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbnRpdHkuZGVsYXkgPSBNYXRoLmNlaWwoZW50aXR5LnByb2Nlc3NpbmdfdGltZSAqIDAuMSlcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYoZW50aXR5LnByb2Nlc3NpbmdfdGlja3M+PWVudGl0eS5wcm9jZXNzaW5nX3RpbWUpIHtcclxuICAgICAgICBsZXQgYWRkZWQgPSBJZ29yLnByb2Nlc3NURU1QKGVudGl0eS4kX3BhcmVudCwgXCJmYWN0b3J5QmxvY2sucHJvZHVjZVN0YWNrc1wiLCB7aXRlbVN0YWNrczogZW50aXR5LnJlY2lwZS5yZXN1bHRzLCBtdWx0aTogZW50aXR5LnByb2Nlc3NpbmdfY291bnR9KVxyXG4gICAgICAgIGlmKGFkZGVkPjApIHtcclxuICAgICAgICAgICAgZW50aXR5LnByb2Nlc3NpbmdfdGlja3M9TmFOXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ291bGRuJ3QgZGVwb3NpdCBhbGwgc28uLi4gdHJ5IGFnYWluIGFmdGVyIGEgZGVsYXlcclxuICAgICAgICAgICAgZW50aXR5LmRlbGF5ID0gTWF0aC5jZWlsKGVudGl0eS5wcm9jZXNzaW5nX3RpbWUgKiAwLjEpXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlbnRpdHkucHJvY2Vzc2luZ190aWNrcysrXHJcbiAgICB9XHJcblxyXG59XHJcblxyXG5JZ29ySnMuZGVmaW5lT2JqKFwiRmFjdG9yeUxpbmVcIiwgRmFjdG9yeUxpbmUuTmV3LCBGYWN0b3J5TGluZSlcclxuXHJcbi8qKlxyXG4gKiAgKiBGYWN0b3J5IEJ1c1xyXG4gKiAgVE9ETzogc291cmNlL2RyYWlucyBhcmUgbWFuYWdlZCBmcm9tIGZhY3RvcnlCbG9ja3NcclxuICogIFRPRE86IFRpY2tlciB0byBtb3ZlIHRoaW5ncyBiZXR3ZWVuIGJ1ZmZlcnNcclxuICogIFRPRE86IFVwZ3JhZGVzIGFuZCBleHBhbnNpb25zXHJcbiAqIFxyXG4gKi9cclxuXHJcblxyXG5jb25zdCBGYWN0b3J5QnVzID0ge31cclxuRmFjdG9yeUJ1cy5OZXcgPSAocGFyYW1zLCBuZXdPYmosIElnb3IpID0+IHtcclxuICAgIG5ld09iai5uYW1lID0gcGFyYW1zLm5hbWUuc3RyaW5nXHJcbiAgICBuZXdPYmouc2l6ZSA9IDI1XHJcbiAgICBuZXdPYmouY29tcGxleGl0eSA9IDVcclxuICAgIG5ld09iai5jb25uZWN0aW9ucyA9IHtcclxuICAgICAgICBzb3VyY2VzOiBbXVxyXG4gICAgICAgICxkcmFpbnM6IFtdXHJcbiAgICAgICAgLG1heFNvdXJjZXM6IDBcclxuICAgICAgICAsbWF4RHJhaW5zOiAwXHJcbiAgICB9XHJcbiAgICBuZXdPYmoucHJvY2Vzc29ycyA9IHtcclxuICAgICAgICBzb3VyY2U6IHt4ZmVyVGlja3M6IDEyMCwgeGZlclRpbWVyOiAwLCB4ZmVyVGFyZ2V0OiAwLCB4ZmVyUXR5OiAwfVxyXG4gICAgICAgICxkcmFpbjoge3hmZXJUaWNrczogMTIwLCB4ZmVyVGltZXI6IDAsIHhmZXJUYXJnZXQ6IDAsIHhmZXJRdHk6IDB9XHJcbiAgICAgICAgLGNlbnRyYWw6IElnb3IubmV3Q29tcG9uZW50KFwiZW50aXR5LmJ1ZmZlclwiLCB7c3RhY2tzOiAxLCBzdGFja1NpemU6IDEwIH0sIG5ld09iai4kX2lkKVxyXG4gICAgfVxyXG4gICAgbmV3T2JqLmNsb2dnZWQgPSBmYWxzZVxyXG4gICAgbmV3T2JqLnN1Ykljb24gPSBcInN0b25lXCJcclxuICAgLy8gbmV3T2JqLiRfdGFncy5wdXNoKFwidGlja1wiLCBcInByb2Nlc3NpbmdcIilcclxuICAgIHJldHVybiBbbmV3T2JqXVxyXG59XHJcbkZhY3RvcnlCdXMuTmV3Ll9zaWduYWwgPSBcImdlbmVyYWxVcGRhdGVcIlxyXG5GYWN0b3J5QnVzLlNlbGVjdFN1Ykljb24gPSAob2JqLCBwYXJhbXMsIElnb3IpID0+IHtcclxuICAgIG9iai5hdC5mYWN0b3J5QnVzLnN1Ykljb24gPSBvYmoud2hpY2guaWNvblxyXG59XHJcbkZhY3RvcnlCdXMuU2VsZWN0U3ViSWNvbi5zaWduYXR1cmUgPSB7XHJcbiAgICBhdDogXCJmYWN0b3J5QnVzXCIsXHJcbiAgICB3aGljaDogXCJpY29uXCJcclxufVxyXG5GYWN0b3J5QnVzLlNlbGVjdFN1Ykljb24uQ0NfcHJvdmlkZSA9IFwiZmFjdG9yeUJ1cy5zZWxlY3RTdWJJY29uXCJcclxuRmFjdG9yeUJ1cy5DbGVhckNvbm5lY3Rpb24gPSAodGFyZ2V0LCBhcmdzLCByZXR1cm5PYmosIElnb3IpID0+IHtcclxuICAgIGxldCBjb25uID0gYXJncy5kaXI9PVwic291cmNlc1wiID8gXCJkcmFpbnNcIjogXCJzb3VyY2VzXCJcclxuICAgIGxldCBpZHggPSB0YXJnZXQuY29ubmVjdGlvbnNbY29ubl0uZmluZEluZGV4KCAoeCkgPT4geyByZXR1cm4geC5idWZmZXI9PWFyZ3MuaWQgfSlcclxuICAgIGlmKGlkeD09LTEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImNvdWxkbid0IGZpbmQgaW5kZXhcIilcclxuICAgICAgICBkZWJ1Z2dlclxyXG4gICAgfVxyXG4gICAgdGFyZ2V0LmNvbm5lY3Rpb25zW2Nvbm5dLnNwbGljZShpZHgsIDEpXHJcbiAgICB0YXJnZXQucHJvY2Vzc29yc1tjb25uXS54ZmVyVGFyZ2V0ID0gMDtcclxufVxyXG5GYWN0b3J5QnVzLkNsZWFyQ29ubmVjdGlvbi5JZ29yX29wZXJhdGlvbiA9IFwiZmFjdG9yeUJ1cy5jbGVhckNvbm5lY3Rpb25cIlxyXG5GYWN0b3J5QnVzLkNvbm5lY3RUbyA9IChvYmosIElnb3IpID0+IHtcclxuICAgIGxldCBidXMgPSBJZ29yLmdldElkKG9iai5jb25uZWN0VG8uZmFjdG9yeUJ1cylcclxuICAgIGxldCBibG9jayA9IElnb3IuZ2V0SWQob2JqLmNvbm5lY3RUby5ibG9jaylcclxuICAgIGlmKG9iai5kaXIuc3RyaW5nPT1cIm91dHB1dFwiKSB7XHJcbiAgICAgICAgLy90YXJnZXQgZHJhaW4sIGJ1cyBzb3VyY2VcclxuICAgICAgICBpZihvYmouY3VycmVudC5idXMhPS0xICYmIGJsb2NrLmNvbm5lY3Rpb25zLmRyYWlucy5pbmNsdWRlcyhvYmouY3VycmVudC5idXMpKSB7XHJcbiAgICAgICAgICAgIGxldCBpZHggPSBibG9jay5jb25uZWN0aW9ucy5kcmFpbnMuaW5kZXhPZihvYmouY3VycmVudC5idXMpXHJcbiAgICAgICAgICAgIGJsb2NrLmNvbm5lY3Rpb25zLmRyYWlucy5zcGxpY2UoaWR4LCAxKVxyXG4gICAgICAgICAgICBsZXQgY3VyciA9IElnb3IuZ2V0SWQob2JqLmN1cnJlbnQuYnVzKVxyXG4gICAgICAgICAgICBpZHggPSBjdXJyLmNvbm5lY3Rpb25zLnNvdXJjZXMuaW5kZXhPZihibG9jay4kX2lkKVxyXG4gICAgICAgICAgICBjdXJyLmNvbm5lY3Rpb25zLnNvdXJjZXMuc3BsaWNlKGlkeCwgMSlcclxuICAgICAgICAgICAgY3Vyci5wcm9jZXNzb3JzLnNvdXJjZS54ZmVyVGFyZ2V0ID0gMFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihibG9jay5jb25uZWN0aW9ucy5kcmFpbnMubGVuZ3RoPGJsb2NrLmNvbm5lY3Rpb25zLm1heERyYWlucyAmJlxyXG4gICAgICAgICAgICBidXMuY29ubmVjdGlvbnMuc291cmNlcy5sZW5ndGg8YnVzLmNvbm5lY3Rpb25zLm1heFNvdXJjZXMpIHtcclxuICAgICAgICAgICAgYmxvY2suY29ubmVjdGlvbnMuZHJhaW5zLnB1c2gob2JqLmNvbm5lY3RUby5mYWN0b3J5QnVzKVxyXG4gICAgICAgICAgICBidXMuY29ubmVjdGlvbnMuc291cmNlcy5wdXNoKG9iai5jb25uZWN0VG8uYmxvY2spXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgSWdvci52aWV3Lndhcm5Ub2FzdChcIk5vIGF2YWlsYWJsZSBzb3VyY2UgY29ubmVjdGlvbnNcIilcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vdGFyZ2V0IHNvdXJjZSwgYnVzIGRyYWluXHJcbiAgICAgICAgaWYob2JqLmN1cnJlbnQuYnVzIT0tMSAmJiBibG9jay5jb25uZWN0aW9ucy5zb3VyY2VzLmluY2x1ZGVzKG9iai5jdXJyZW50LmJ1cykpIHtcclxuICAgICAgICAgICAgbGV0IGlkeCA9IGJsb2NrLmNvbm5lY3Rpb25zLnNvdXJjZXMuaW5kZXhPZihvYmouY3VycmVudC5idXMpXHJcbiAgICAgICAgICAgIGJsb2NrLmNvbm5lY3Rpb25zLnNvdXJjZXMuc3BsaWNlKGlkeCwgMSlcclxuICAgICAgICAgICAgbGV0IGN1cnIgPSBJZ29yLmdldElkKG9iai5jdXJyZW50LmJ1cylcclxuICAgICAgICAgICAgaWR4ID0gY3Vyci5jb25uZWN0aW9ucy5kcmFpbnMuaW5kZXhPZihibG9jay4kX2lkKVxyXG4gICAgICAgICAgICBjdXJyLmNvbm5lY3Rpb25zLmRyYWlucy5zcGxpY2UoaWR4LCAxKVxyXG4gICAgICAgICAgICBjdXJyLnByb2Nlc3NvcnMuZHJhaW4ueGZlclRhcmdldCA9IDBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoYmxvY2suY29ubmVjdGlvbnMuc291cmNlcy5sZW5ndGg8YmxvY2suY29ubmVjdGlvbnMubWF4U291cmNlcyAmJlxyXG4gICAgICAgICAgICBidXMuY29ubmVjdGlvbnMuZHJhaW5zLmxlbmd0aDxidXMuY29ubmVjdGlvbnMubWF4RHJhaW5zKSB7XHJcbiAgICAgICAgICAgIGJsb2NrLmNvbm5lY3Rpb25zLnNvdXJjZXMucHVzaChvYmouY29ubmVjdFRvLmZhY3RvcnlCdXMpXHJcbiAgICAgICAgICAgIGJ1cy5jb25uZWN0aW9ucy5kcmFpbnMucHVzaChvYmouY29ubmVjdFRvLmJsb2NrKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIElnb3Iudmlldy53YXJuVG9hc3QoXCJObyBhdmFpbGFibGUgZHJhaW4gY29ubmVjdGlvbnNcIilcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBJZ29yLnZpZXcuc2lnbmFsZXIuc2lnbmFsKFwiZ2VuZXJhbFVwZGF0ZVwiKVxyXG59XHJcbkZhY3RvcnlCdXMuQ29ubmVjdFRvLnNpZ25hdHVyZSA9IHtcclxuICAgIGRpcjogXCJzdHJpbmdcIixcclxuICAgIGNvbm5lY3RUbzogW1wiZmFjdG9yeUJ1c1wiLCBcImJsb2NrXCJdLFxyXG4gICAgY3VycmVudDogXCJidXNcIlxyXG59XHJcbkZhY3RvcnlCdXMuQ29ubmVjdFRvLkNDX3Byb3ZpZGUgPSBcImZhY3RvcnlCdXMuY29ubmVjdFRvXCJcclxuRmFjdG9yeUJ1cy5FeHBhbmRCdXMgPSAob2JqLCBJZ29yKSA9PiB7XHJcbiAgICBsZXQgY29uc3VtZWQgPSBJZ29yLnByb2Nlc3NURU1QKG9iai5wbGF5ZXIuaW52ZW50b3J5LCBcImludmVudG9yeS5jb25zdW1lXCIsIHtpdGVtU3RhY2tzOiBJZ29yLmdldFN0YXRpYyhcIml0ZW1TdGFja0Nvc3QuYnVzRXhwYW5zaW9uXCIpfSlcclxuICAgIGlmKCFjb25zdW1lZCkgcmV0dXJuIElnb3Iudmlldy53YXJuVG9hc3QoXCJVbmFibGUgdG8gY29uc3VtZSBjb3N0cyB0byBleHBhbmQgYnVzXCIpXHJcbiAgICBpZihvYmouZGlyLnN0cmluZz09XCJzb3VyY2VcIikge1xyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLmNvbm5lY3Rpb25zLm1heFNvdXJjZXMgKz0gMVxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLmNvbXBsZXhpdHkgKz0gNVxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLnNpemUgKz0gMTBcclxuICAgIH0gZWxzZSBpZihvYmouZGlyLnN0cmluZz09XCJkcmFpblwiKSB7XHJcbiAgICAgICAgb2JqLmF0LmZhY3RvcnlCdXMuY29ubmVjdGlvbnMubWF4RHJhaW5zICs9IDFcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUJ1cy5zaXplICs9IDEwXHJcbiAgICAgICAgb2JqLmF0LmZhY3RvcnlCdXMuY29tcGxleGl0eSArPSA1XHJcbiAgICB9XHJcbiAgICBpZihvYmouYXQuZmFjdG9yeUJ1cy5jb25uZWN0aW9ucy5tYXhTb3VyY2VzICYmIG9iai5hdC5mYWN0b3J5QnVzLmNvbm5lY3Rpb25zLm1heERyYWlucykge1xyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLiRfdGFncy5wdXNoKFwidGlja1wiLCBcInByb2Nlc3NpbmdcIilcclxuICAgIH1cclxuICAgIGxldCBjZW50cmFsID0gSWdvci5nZXRJZChvYmouYXQuZmFjdG9yeUJ1cy5wcm9jZXNzb3JzLmNlbnRyYWwpXHJcbiAgICBjZW50cmFsLm1heFN0YWNrcyA9IE1hdGgubWluKE1hdGguY2VpbChvYmouYXQuZmFjdG9yeUJ1cy5zaXplLzUwKSwgMTUpXHJcbn1cclxuRmFjdG9yeUJ1cy5FeHBhbmRCdXMuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiZmFjdG9yeUJ1c1wiLFxyXG4gICAgZGlyOiBcInN0cmluZ1wiLFxyXG4gICAgcGxheWVyOiBcImludmVudG9yeVwiXHJcbn0gXHJcbkZhY3RvcnlCdXMuRXhwYW5kQnVzLkNDX3Byb3ZpZGUgPSBcImZhY3RvcnlCdXMuZXhwYW5kQnVzXCJcclxuRmFjdG9yeUJ1cy5FeHBhbmRQcm9jZXNzaW5nID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgbGV0IGNvbnN1bWVkID0gSWdvci5wcm9jZXNzVEVNUChvYmoucGxheWVyLmludmVudG9yeSwgXCJpbnZlbnRvcnkuY29uc3VtZVwiLCB7aXRlbVN0YWNrczogSWdvci5nZXRTdGF0aWMoXCJpdGVtU3RhY2tDb3N0LmJ1c1Byb2Nlc3NpbmdcIil9KVxyXG4gICAgaWYoIWNvbnN1bWVkKSByZXR1cm4gSWdvci52aWV3Lndhcm5Ub2FzdChcIlVuYWJsZSB0byBjb25zdW1lIGNvc3RzIHRvIGV4cGFuZCBidXNcIilcclxuICAgIGlmKG9iai5kaXIuc3RyaW5nPT1cInNvdXJjZVwiKSB7XHJcbiAgICAgICAgb2JqLmF0LmZhY3RvcnlCdXMucHJvY2Vzc29ycy5zb3VyY2UueGZlclF0eSArPSAyXHJcbiAgICAgICAgb2JqLmF0LmZhY3RvcnlCdXMuc2l6ZSArPSAxMFxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLmNvbXBsZXhpdHkgKz0gNVxyXG4gICAgfSBlbHNlIGlmKG9iai5kaXIuc3RyaW5nPT1cImRyYWluXCIpIHtcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUJ1cy5wcm9jZXNzb3JzLmRyYWluLnhmZXJRdHkgKz0gMlxyXG4gICAgICAgIG9iai5hdC5mYWN0b3J5QnVzLnNpemUgKz0gMTBcclxuICAgICAgICBvYmouYXQuZmFjdG9yeUJ1cy5jb21wbGV4aXR5ICs9IDVcclxuICAgIH1cclxufVxyXG5GYWN0b3J5QnVzLkV4cGFuZFByb2Nlc3Npbmcuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiZmFjdG9yeUJ1c1wiLFxyXG4gICAgZGlyOiBcInN0cmluZ1wiLFxyXG4gICAgcGxheWVyOiBcImludmVudG9yeVwiXHJcbn1cclxuRmFjdG9yeUJ1cy5FeHBhbmRQcm9jZXNzaW5nLkNDX3Byb3ZpZGUgPSBcImZhY3RvcnlCdXMuZXhwYW5kUHJvY2Vzc2luZ1wiXHJcbkZhY3RvcnlCdXMuX190b29sdGlwcyA9IChvYmosIGFyZ3MsIHJldCwgSWdvcikgPT4ge1xyXG4gICAgaWYoIW9iaikgcmV0dXJuXHJcbiAgICBsZXQgd2hvID0gSWdvci5nZXRJZChvYmopXHJcbiAgICBsZXQgZGF0YSA9IFtdXHJcbiAgICBsZXQgdGlwID0gXCJcIlxyXG4gICAgc3dpdGNoKGFyZ3Mud2hpY2gpIHtcclxuICAgICAgICBjYXNlIFwiaW5wdXRfcHJvY2Vzc2luZ1wiOlxyXG4gICAgICAgICAgICBkYXRhLnB1c2goe25hbWU6IFwiaW5zZXJ0ZXJcIiwgY291bnQ6IDJ9KVxyXG4gICAgICAgICAgICB0aXAgPSBcIklucHV0IFByb2Nlc3NpbmdcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZXhwYW5kX2lucHV0X3NvdXJjZXNcIjpcclxuICAgICAgICAgICAgZGF0YS5wdXNoKHtuYW1lOiBcImlyb24tY2hlc3RcIiwgY291bnQ6IDJ9KVxyXG4gICAgICAgICAgICB3aG8uY29ubmVjdGlvbnMubWF4U291cmNlcyAmJiBkYXRhLnB1c2goe25hbWU6IFwidHJhbnNwb3J0LWJlbHRcIiwgY291bnQ6IDUqd2hvLmNvbm5lY3Rpb25zLm1heFNvdXJjZXN9KVxyXG4gICAgICAgICAgICB0aXAgPSBcIkV4cGFuZCBTb3VyY2UgUG9pbnRzXCJcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIm91dHB1dF9wcm9jZXNzaW5nXCI6XHJcbiAgICAgICAgICAgIGRhdGEucHVzaCh7bmFtZTogXCJpbnNlcnRlclwiLCBjb3VudDogMn0pXHJcbiAgICAgICAgICAgIHRpcCA9IFwiT3V0cHV0IFByb2Nlc3NpbmdcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiZXhwYW5kX291dHB1dF9kcmFpbnNcIjpcclxuICAgICAgICAgICAgZGF0YS5wdXNoKHtuYW1lOiBcImlyb24tY2hlc3RcIiwgY291bnQ6IDJ9KVxyXG4gICAgICAgICAgICB3aG8uY29ubmVjdGlvbnMubWF4RHJhaW5zICYmIGRhdGEucHVzaCh7bmFtZTogXCJ0cmFuc3BvcnQtYmVsdFwiLCBjb3VudDogNSp3aG8uY29ubmVjdGlvbnMubWF4RHJhaW5zfSlcclxuICAgICAgICAgICAgdGlwID0gXCJFeHBhbmQgRHJhaW4gUG9pbnRzXCJcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgcmV0Ll9yZXN1bHQgPSB7dG9vbDogXCJzdGFja0FycmF5XCIsIHRpcCwgZGF0YX1cclxufVxyXG5GYWN0b3J5QnVzLl9fdG9vbHRpcHMuQ0NfdXRpbGl0eSA9IFwiYnVzTGluZV9Db3N0c1wiXHJcbkZhY3RvcnlCdXMuQ2xlYXJDbG9nID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgSWdvci5nZXRJZChvYmouYXQuZmFjdG9yeUJ1cy5wcm9jZXNzb3JzLmNlbnRyYWwpLml0ZW1zLmZvckVhY2goICh4KSA9PiB7XHJcbiAgICAgICAgSWdvci5wcm9jZXNzVEVNUChcInBsYXllci5pbnZlbnRvcnlcIiwgXCJpbnZlbnRvcnkuYWRkXCIsIHtpdGVtU3RhY2tzOiB4fSlcclxuICAgICAgICB4LmNvdW50ID0gMDtcclxuICAgICAgICB4Lmljb24gPSB1bmRlZmluZWRcclxuICAgIH0pXHJcbiAgICBvYmouYXQuZmFjdG9yeUJ1cy5jbG9nZ2VkID0gZmFsc2VcclxufVxyXG5GYWN0b3J5QnVzLkNsZWFyQ2xvZy5zaWduYXR1cmUgPSB7XHJcbiAgICBhdDogXCJmYWN0b3J5QnVzXCJcclxufVxyXG5GYWN0b3J5QnVzLkNsZWFyQ2xvZy5DQ19wcm92aWRlID0gXCJmYWN0b3J5QnVzLmNsZWFyQ2xvZ1wiXHJcbkZhY3RvcnlCdXMudGljayA9IChlbnRpdHksIHRpY2tkYXRhLCBJZ29yKSA9PiB7XHJcbiAgICBpZihlbnRpdHkuY29ubmVjdGlvbnMuc291cmNlcy5sZW5ndGg+MCAmJiBlbnRpdHkucHJvY2Vzc29ycy5zb3VyY2U/LnhmZXJRdHk+MCkge1xyXG4gICAgICAgIGlmKGVudGl0eS5wcm9jZXNzb3JzLnNvdXJjZS54ZmVyVGltZXI+PWVudGl0eS5wcm9jZXNzb3JzLnNvdXJjZS54ZmVyVGlja3MpIHtcclxuICAgICAgICAgICAgbGV0IGJ1c1hmZXIgPSBJZ29yLnByb2Nlc3NURU1QKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSWdvci5nZXRJZChlbnRpdHkuY29ubmVjdGlvbnMuc291cmNlc1tlbnRpdHkucHJvY2Vzc29ycy5zb3VyY2UueGZlclRhcmdldF0sIFwiYnVmZmVycy5vdXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICxcImJ1ZmZlci5idXNYZmVyXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICx7eGZlckNvdW50OiBlbnRpdHkucHJvY2Vzc29ycy5zb3VyY2UueGZlclF0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAsdG9CdXM6IGVudGl0eS5wcm9jZXNzb3JzLmNlbnRyYWx9KVxyXG4gICAgICAgICAgICBpZihidXNYZmVyLmZ1bGwpIHtcclxuICAgICAgICAgICAgICAgIGVudGl0eS5jbG9nZ2VkID0gdHJ1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICsrZW50aXR5LnByb2Nlc3NvcnMuc291cmNlLnhmZXJUYXJnZXQ9PWVudGl0eS5jb25uZWN0aW9ucy5zb3VyY2VzLmxlbmd0aCAmJiAoZW50aXR5LnByb2Nlc3NvcnMuc291cmNlLnhmZXJUYXJnZXQ9MClcclxuICAgICAgICAgICAgZW50aXR5LnByb2Nlc3NvcnMuc291cmNlLnhmZXJUaW1lcj0wXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZW50aXR5LnByb2Nlc3NvcnMuc291cmNlLnhmZXJUaW1lcisrXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoZW50aXR5LmNvbm5lY3Rpb25zLmRyYWlucy5sZW5ndGg+MCAgJiYgZW50aXR5LnByb2Nlc3NvcnMuZHJhaW4/LnhmZXJRdHk+MCkge1xyXG4gICAgICAgIGlmKGVudGl0eS5wcm9jZXNzb3JzLmRyYWluLnhmZXJUaW1lcj49ZW50aXR5LnByb2Nlc3NvcnMuZHJhaW4ueGZlclRpY2tzKSB7XHJcbiAgICAgICAgICAgIGxldCBidXNYZmVyID0gSWdvci5wcm9jZXNzVEVNUChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIElnb3IuZ2V0SWQoZW50aXR5LmNvbm5lY3Rpb25zLmRyYWluc1tlbnRpdHkucHJvY2Vzc29ycy5kcmFpbi54ZmVyVGFyZ2V0XSwgXCJidWZmZXJzLmluXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAsXCJidWZmZXIuYnVzWGZlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAse3hmZXJDb3VudDogZW50aXR5LnByb2Nlc3NvcnMuZHJhaW4ueGZlclF0eVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLGZyb21CdXM6IGVudGl0eS5wcm9jZXNzb3JzLmNlbnRyYWx9KVxyXG4gICAgICAgICAgICBpZihidXNYZmVyLmZ1bGwpIHtcclxuICAgICAgICAgICAgICAgIC8vc2tpcCBvdXRwdXR0aW5nP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICsrZW50aXR5LnByb2Nlc3NvcnMuZHJhaW4ueGZlclRhcmdldD09ZW50aXR5LmNvbm5lY3Rpb25zLmRyYWlucy5sZW5ndGggJiYgKGVudGl0eS5wcm9jZXNzb3JzLmRyYWluLnhmZXJUYXJnZXQ9MClcclxuICAgICAgICAgICAgZW50aXR5LnByb2Nlc3NvcnMuZHJhaW4ueGZlclRpbWVyPTBcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlbnRpdHkucHJvY2Vzc29ycy5kcmFpbi54ZmVyVGltZXIrK1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG59XHJcblxyXG5JZ29ySnMuZGVmaW5lT2JqKFwiRmFjdG9yeUJ1c1wiLCBGYWN0b3J5QnVzLk5ldywgRmFjdG9yeUJ1cylcclxuXHJcblxyXG5cclxuLypcclxuICogIFJlc291cmNlIEJsb2NrXHJcbiAqL1xyXG5cclxuY29uc3QgUmVzb3VyY2VCbG9jayA9IHt9XHJcblJlc291cmNlQmxvY2suTmV3ID0gKHBhcmFtcywgbmV3T2JqLCBJZ29yKSA9PiB7XHJcbiAgICBuZXdPYmoubmFtZSA9IHBhcmFtcy5uYW1lLnN0cmluZ1xyXG4gICAgbmV3T2JqLnBhdGNoUHJvcGVydGllcyA9IHt9XHJcbiAgICBuZXdPYmouc3BhY2VVc2VkID0gNTBcclxuICAgIG5ld09iai5jb21wbGV4aXR5ID0gMVxyXG4gICAgbmV3T2JqLmNvbm5lY3Rpb25zID0ge1xyXG4gICAgICAgIGRyYWluczogW10sXHJcbiAgICAgICAgbWF4RHJhaW5zOiAxXHJcbiAgICB9XHJcbiAgICBuZXdPYmoucHJlcHBlZCA9IDBcclxuICAgIG5ld09iai5idWlsdCA9IDBcclxuICAgIG5ld09iai5taW5pbmdfdGlja3MgPSBOYU5cclxuICAgIG5ld09iai5taW5pbmdfZHJpbGwgPSBcImJ1cm5lci1taW5pbmctZHJpbGxcIlxyXG4gICAgbmV3T2JqLmJ1ZmZlcnMgPSB7fVxyXG4gICAgbmV3T2JqLmJ1ZmZlcnMub3V0ID0gSWdvci5uZXdDb21wb25lbnQoXCJlbnRpdHkuYnVmZmVyXCIsIHtyZXN0cmljdGFibGU6IHRydWUsIHN0YWNrczogMSwgc3RhY2tTaXplOiAwfSwgbmV3T2JqKVxyXG5cclxuICAgIHJldHVybiBbbmV3T2JqXVxyXG59XHJcblJlc291cmNlQmxvY2suTmV3Ll9zaWduYWwgPSBcImdlbmVyYWxVcGRhdGVcIlxyXG5SZXNvdXJjZUJsb2NrLlNldFJlc291cmNlID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgbGV0IHJlc0Jsb2NrID0gb2JqLmF0LlJlc291cmNlQmxvY2tcclxuICAgIGlmKG9iai5hdC5SZXNvdXJjZUJsb2NrLnBhdGNoUHJvcGVydGllcy5yZXNvdXJjZSkge1xyXG4gICAgICAgIGxldCBidWZmZXIgPSBJZ29yLmdldElkKHJlc0Jsb2NrLmJ1ZmZlcnMub3V0KVxyXG4gICAgICAgIElnb3IucHJvY2Vzc1RFTVAoSWdvci5nZXROYW1lZE9iamVjdChcInBsYXllci5pbnZlbnRvcnlcIiksIFwiaW52ZW50b3J5LmFkZFwiLCB7aXRlbVN0YWNrczogYnVmZmVyLml0ZW1zfSlcclxuICAgICAgICBidWZmZXIuaXRlbXMgPSBbXVxyXG4gICAgfVxyXG4gICAgb2JqLmF0LlJlc291cmNlQmxvY2suJF90YWdzLnB1c2goXCJ0aWNrXCIsIFwicHJvY2Vzc2luZ1wiKVxyXG4gICAgb2JqLmF0LlJlc291cmNlQmxvY2sucGF0Y2hQcm9wZXJ0aWVzLnJlc291cmNlID0gb2JqLndoaWNoLnJlc291cmNlXHJcbiAgICBpZihvYmouYXQuUmVzb3VyY2VCbG9jay5taW5pbmdfZHJpbGwpIHtcclxuICAgICAgICBvYmouYXQuUmVzb3VyY2VCbG9jay5wYXRjaFByb3BlcnRpZXMubWluaW5nX3RpbWUgPSBJZ29yLmRhdGEucmVzb3VyY2Vbb2JqLndoaWNoLnJlc291cmNlXS5taW5pbmdfdGltZSAvIElnb3IuZGF0YS5lbnRpdHlbb2JqLmF0LlJlc291cmNlQmxvY2subWluaW5nX2RyaWxsXS5taW5pbmdfc3BlZWQgKiBJZ29yLmdldFN0YXRpYyhcImNvbmZpZy5USUNLU19QRVJfU0VDT05EXCIpXHJcbiAgICAgICAgb2JqLmF0LlJlc291cmNlQmxvY2subWluaW5nX3RpY2tzID0gIG9iai5hdC5SZXNvdXJjZUJsb2NrLnBhdGNoUHJvcGVydGllcy5taW5pbmdfdGltZVxyXG4gICAgICAgIG9iai5hdC5SZXNvdXJjZUJsb2NrLnN1Ykljb24gPSBvYmouYXQuUmVzb3VyY2VCbG9jay5wYXRjaFByb3BlcnRpZXMucmVzb3VyY2VcclxuICAgIH1cclxufVxyXG5SZXNvdXJjZUJsb2NrLlNldFJlc291cmNlLnNpZ25hdHVyZSA9IHtcclxuICAgIGF0OiBcIlJlc291cmNlQmxvY2tcIixcclxuICAgIHdoaWNoOiAncmVzb3VyY2UnXHJcbn1cclxuUmVzb3VyY2VCbG9jay5TZXRSZXNvdXJjZS5DQ19wcm92aWRlID0gXCJyZXNCbG9jay5zZXRSZXNvdXJjZVwiXHJcblJlc291cmNlQmxvY2suUHJlcFNwYWNlID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgaWYoSWdvci5wcm9jZXNzVEVNUChvYmoucGxheWVyLmludmVudG9yeSwgXCJpbnZlbnRvcnkuY29uc3VtZVwiLCB7aXRlbVN0YWNrczogSWdvci5nZXRTdGF0aWMoJ2l0ZW1TdGFja0Nvc3QucmVzQmxvY2tfZm91bmRhdGlvbicpfSkpIHtcclxuICAgICAgICBvYmouYXQuUmVzb3VyY2VCbG9jay5wcmVwcGVkKytcclxuICAgICAgICBvYmouYXQuUmVzb3VyY2VCbG9jay5zcGFjZVVzZWQgKz0gMTBcclxuICAgICAgICBvYmouYXQuUmVzb3VyY2VCbG9jay5jb21wbGV4aXR5ICs9IDVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgSWdvci52aWV3Lndhcm5Ub2FzdChcIlVuYWJsZSB0byBjb25zdW1lIGZvdW5kYXRpb24gY29zdHNcIilcclxuICAgIH1cclxuXHJcbn1cclxuUmVzb3VyY2VCbG9jay5QcmVwU3BhY2Uuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiUmVzb3VyY2VCbG9ja1wiLFxyXG4gICAgcGxheWVyOiBcImludmVudG9yeVwiXHJcbn1cclxuUmVzb3VyY2VCbG9jay5QcmVwU3BhY2UuQ0NfcHJvdmlkZSA9IFwicmVzQmxvY2sucHJlcFNwYWNlXCJcclxuUmVzb3VyY2VCbG9jay5CdWlsZE1pbmUgPSAob2JqLCBJZ29yKSA9PiB7XHJcbiAgICBpZihvYmouYXQuUmVzb3VyY2VCbG9jay5wcmVwcGVkPT0wKSByZXR1cm5cclxuICAgIGlmKElnb3IucHJvY2Vzc1RFTVAob2JqLnBsYXllci5pbnZlbnRvcnksIFwiaW52ZW50b3J5LmNvbnN1bWVcIiwge2l0ZW1TdGFja3M6IElnb3IuZ2V0U3RhdGljKCdpdGVtU3RhY2tDb3N0LnJlc0Jsb2NrX21pbmVyJyl9KSkge1xyXG4gICAgICAgIG9iai5hdC5SZXNvdXJjZUJsb2NrLnByZXBwZWQtLVxyXG4gICAgICAgIG9iai5hdC5SZXNvdXJjZUJsb2NrLmJ1aWx0KytcclxuICAgICAgICBJZ29yLmdldElkKG9iai5hdC5SZXNvdXJjZUJsb2NrLmJ1ZmZlcnMub3V0KS5zdGFja1NpemUgKz0gNVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gSWdvci52aWV3Lndhcm5Ub2FzdChcIk1pbmluZyBkcmlsbCBub3QgYXZhaWxhYmxlXCIpXHJcbiAgICB9XHJcbn1cclxuUmVzb3VyY2VCbG9jay5CdWlsZE1pbmUuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6IFwiUmVzb3VyY2VCbG9ja1wiLFxyXG4gICAgcGxheWVyOiBcImludmVudG9yeVwiXHJcbn1cclxuUmVzb3VyY2VCbG9jay5CdWlsZE1pbmUuQ0NfcHJvdmlkZSA9IFwicmVzQmxvY2suYnVpbGRNaW5lXCJcclxuUmVzb3VyY2VCbG9jay5fX2ZvdW5kYXRpb25Db3N0ID0gKG9iaiwgeF9udWxsLCByZXQsIElnb3IpID0+IHtcclxuICAgIGxldCB3aG8gPSBJZ29yLmdldElkKG9iailcclxuICAgIGxldCBpcyA9IFt7bmFtZTogXCJzdG9uZVwiLCBjb3VudDogNX1dXHJcbiAgICBpcy5wdXNoKHtuYW1lOiBcInRyYW5zcG9ydC1iZWx0XCIsIGNvdW50OiBNYXRoLmZsb29yKHdoby5zcGFjZVVzZWQvMTApfSlcclxuICAgIHJldC5fcmVzdWx0ID0ge3Rvb2w6ICdzdGFja0FycmF5JywgdGlwOiAnRm91bmRhdGlvbiBDb3N0JywgZGF0YTogaXN9XHJcbn1cclxuUmVzb3VyY2VCbG9jay5fX2ZvdW5kYXRpb25Db3N0LkNDX3V0aWxpdHkgPSBcInJlc0Jsb2NrLl9fZm91bmRhdGlvbkNvc3RcIlxyXG5SZXNvdXJjZUJsb2NrLl9fbWluZXJDb3N0ID0gKG9iaiwgYXJnc19udWxsLCByZXQsIElnb3IpID0+IHtcclxuICAgIGxldCB3aG8gPSBJZ29yLmdldElkKG9iailcclxuICAgIGxldCBpcyA9IFt7bmFtZTogd2hvLm1pbmluZ19kcmlsbCwgY291bnQ6IDF9XVxyXG4gICAgcmV0Ll9yZXN1bHQgPSB7dG9vbDogJ3N0YWNrQXJyYXknLCB0aXA6ICdGb3VuZGF0aW9uIENvc3QnLCBkYXRhOiBpc31cclxufVxyXG5SZXNvdXJjZUJsb2NrLl9fbWluZXJDb3N0LkNDX3V0aWxpdHkgPSBcInJlc0Jsb2NrLl9fbWluZXJDb3N0XCJcclxuUmVzb3VyY2VCbG9jay50aWNrID0gKGVudGl0eSwgdGlja2RhdGEsIElnb3IpID0+IHtcclxuICAgIGlmKGVudGl0eS5idWlsdD09MCB8fCAhZW50aXR5LnBhdGNoUHJvcGVydGllcy5taW5pbmdfdGltZSkgcmV0dXJuXHJcbiAgICBpZihlbnRpdHkubWluaW5nX3RpY2tzPT0wKSB7XHJcbiAgICAgICAgbGV0IHN0b3JlZCA9IElnb3IucHJvY2Vzc1RFTVAoZW50aXR5LmJ1ZmZlcnMub3V0LCBcImludmVudG9yeS5hZGRcIiwge2l0ZW1TdGFja3M6IHtuYW1lOiBlbnRpdHkucGF0Y2hQcm9wZXJ0aWVzLnJlc291cmNlLCBjb3VudDogZW50aXR5LnN0b3JlZFJlc291cmNlcyB8fCBlbnRpdHkuYnVpbHR9fSlcclxuICAgICAgICBlbnRpdHkubWluaW5nX3RpY2tzID0gZW50aXR5LnBhdGNoUHJvcGVydGllcy5taW5pbmdfdGltZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlbnRpdHkubWluaW5nX3RpY2tzLS1cclxuICAgIH1cclxufVxyXG5JZ29ySnMuZGVmaW5lT2JqKFwiUmVzb3VyY2VCbG9ja1wiLCBSZXNvdXJjZUJsb2NrLk5ldywgUmVzb3VyY2VCbG9jaylcclxuXHJcbmNvbnN0IFRlY2hCbG9jayA9IHt9XHJcblRlY2hCbG9jay5OZXcgPSAocGFyYW1zLCBuZXdPYmosIElnb3IpID0+IHtcclxuICAgIG5ld09iai5uYW1lID0gcGFyYW1zLm5hbWUuc3RyaW5nXHJcbiAgICBuZXdPYmouc3BhY2VVc2VkID0gNTBcclxuICAgIG5ld09iai5jb21wbGV4aXR5ID0gMTBcclxuICAgIG5ld09iai5wcmVwcGVkID0gMFxyXG4gICAgbmV3T2JqLmJ1aWx0ID0gMFxyXG4gICAgbmV3T2JqLmNvbm5lY3Rpb25zID0geyBzb3VyY2VzOiBbXSwgbWF4U291cmNlczogMX1cclxuICAgIG5ld09iai5idWZmZXJzID0ge31cclxuICAgIG5ld09iai5idWZmZXJzLmluID0gSWdvci5uZXdDb21wb25lbnQoXCJlbnRpdHkuYnVmZmVyXCIsIHtyZXN0cmljdGFibGU6IHRydWUsIHN0YWNrU2l6ZTogMTAsIG1heFN0YWNrOiAyfSwgbmV3T2JqLiRfaWQpXHJcbiAgICBuZXdPYmoudGVjaFRyZWVDbGFzcyA9IFwibWFpblwiXHJcbiAgICBuZXdPYmouc3ViSWNvbiA9IFwiYXV0b21hdGlvbi1zY2llbmNlLXBhY2tcIlxyXG4gICAgbmV3T2JqLnJlc2VhcmNoX3NwZWVkID0gMVxyXG4gICAgbmV3T2JqLnJlc2VhcmNoX3RpY2tzID0gTmFOXHJcbiAgICBuZXdPYmoucmVzZWFyY2hfdGltZSA9IDBcclxuICAgIG5ld09iai5idWlsZGluZ1R5cGUgPSBcImxhYlwiXHJcbiAgICBuZXdPYmouZm91bmRhdGlvblR5cGUgPSBcIlwiXHJcbiAgICByZXR1cm4gW25ld09ial1cclxufVxyXG5UZWNoQmxvY2suTmV3Ll9zaWduYWwgPSBcImdlbmVyYWxVcGRhdGVcIlxyXG5UZWNoQmxvY2sucHJlcFNwYWNlID0gKG9iaiwgSWdvcikgPT4ge1xyXG4gICAgaWYoSWdvci5wcm9jZXNzVEVNUChcInBsYXllci5pbnZlbnRvcnlcIiwgXCJpbnZlbnRvcnkuY29uc3VtZVwiLCB7aXRlbVN0YWNrczogSWdvci5wcm9jZXNzVEVNUChvYmouYXQudGVjaEJsb2NrLCBcInRlY2hCbG9jay50b29sVGlwc1wiLCB7d2hpY2g6IFwiZm91bmRhdGlvblwifSkuZGF0YSB9KSkge1xyXG4gICAgICAgIG9iai5hdC50ZWNoQmxvY2sucHJlcHBlZCsrXHJcbiAgICAgICAgb2JqLmF0LnRlY2hCbG9jay5zcGFjZVVzZWQgKz0gMTBcclxuICAgICAgICBvYmouYXQudGVjaEJsb2NrLmNvbXBsZXhpdHkgKz0gNVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBJZ29yLnZpZXcud2FyblRvYXN0KFwiTm90IGVub3VnaCBtYXRlcmlhbHMgZm9yIGZvdW5kYXRpb25cIilcclxuICAgIH1cclxufVxyXG5UZWNoQmxvY2sucHJlcFNwYWNlLnNpZ25hdHVyZSA9IHtcclxuICAgIGF0OiBcInRlY2hCbG9ja1wiXHJcbn1cclxuVGVjaEJsb2NrLnByZXBTcGFjZS5DQ19wcm92aWRlID0gXCJ0ZWNoQmxvY2sucHJlcFNwYWNlXCJcclxuVGVjaEJsb2NrLkJ1aWxkVGVjaCA9IChvYmosSWdvcikgPT4ge1xyXG4gICAgaWYob2JqLmF0LnRlY2hCbG9jay5wcmVwcGVkPT0wKSByZXR1cm5cclxuICAgIGlmKElnb3IucHJvY2Vzc1RFTVAoXCJwbGF5ZXIuaW52ZW50b3J5XCIsIFwiaW52ZW50b3J5LmNvbnN1bWVcIiwge2l0ZW1TdGFja3M6IElnb3IucHJvY2Vzc1RFTVAob2JqLmF0LnRlY2hCbG9jaywgXCJ0ZWNoQmxvY2sudG9vbFRpcHNcIiwge3doaWNoOiBcImJ1aWxkTGFiXCJ9KS5kYXRhIH0pKSB7XHJcbiAgICAgICAgb2JqLmF0LnRlY2hCbG9jay5wcmVwcGVkLS1cclxuICAgICAgICBvYmouYXQudGVjaEJsb2NrLmJ1aWx0KytcclxuICAgICAgICBJZ29yLmdldElkKG9iai5hdC50ZWNoQmxvY2suYnVmZmVycy5pbikuc3RhY2tTaXplICs9IDVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgSWdvci52aWV3Lndhcm5Ub2FzdChcIk5vdCBlbm91Z2ggbWF0ZXJpYWxzIHRvIGJ1aWxkIGxhYlwiKVxyXG4gICAgfVxyXG4gICAgaWYoIW9iai5hdC50ZWNoQmxvY2suYnVmZmVyU2V0KSB7XHJcbiAgICAgICAgSWdvci5wcm9jZXNzVEVNUChvYmouYXQudGVjaEJsb2NrLmJ1ZmZlcnMuaW4sIFwiYnVmZmVyLnJlc3RyaWN0TGlzdFwiLCB7bGlzdDogWydhdXRvbWF0aW9uLXNjaWVuY2UtcGFjaycsICdsb2dpc3RpYy1zY2llbmNlLXBhY2snXX0pXHJcbiAgICAgICAgb2JqLmF0LnRlY2hCbG9jay5idWZmZXJTZXQgPSB0cnVlXHJcbiAgICB9XHJcbiAgICBvYmouYXQudGVjaEJsb2NrLiRfdGFncy5wdXNoKFwidGlja1wiLCBcInByb2Nlc3NpbmdcIilcclxufVxyXG5UZWNoQmxvY2suQnVpbGRUZWNoLnNpZ25hdHVyZSA9IHtcclxuICAgIGF0OiBcInRlY2hCbG9ja1wiLFxyXG5cclxufVxyXG5UZWNoQmxvY2suQnVpbGRUZWNoLkNDX3Byb3ZpZGU9XCJ0ZWNoQmxvY2suYnVpbGRMYWJcIlxyXG5UZWNoQmxvY2suU2V0VHJlZSA9IChvYmosIElnb3IpID0+IHtcclxuICAgIElnb3Iudmlldy5lcnJvclRvYXN0KFwiTm90IFlldCBJbXBsZW1lbnRlZFwiKVxyXG4gICAgLypcclxuICAgICAgICBzZXQgYnVpbGRpbmcgdHlwZVxyXG4gICAgICAgICAgICBmb3VuZGF0aW9uIHR5cGVcclxuICAgICAgICAgICAgcmVzZWFyY2hpbmdfc3BlZWRcclxuICAgICovXHJcbn1cclxuVGVjaEJsb2NrLlNldFRyZWUuc2lnbmF0dXJlID0ge1xyXG4gICAgYXQ6ICd0ZWNoQmxvY2snXHJcbn1cclxuVGVjaEJsb2NrLlNldFRyZWUuQ0NfcHJvdmlkZT1cInRlY2hCbG9jay5zZXRUcmVlXCJcclxuVGVjaEJsb2NrLl9fdG9vbHRpcHMgPSAob2JqLCBhcmdzLCByZXQsIElnb3IpID0+IHtcclxuICAgIGxldCB3aG8gPSBJZ29yLmdldElkKG9iailcclxuICAgIGxldCBkYXRhID0gW11cclxuICAgIGxldCB0aXAgPSBcIlwiXHJcbiAgICBzd2l0Y2goYXJncy53aGljaCkge1xyXG4gICAgICAgIGNhc2UgJ2ZvdW5kYXRpb24nOlxyXG4gICAgICAgICAgICBkYXRhLnB1c2goe25hbWU6IFwiaW5zZXJ0ZXJcIiwgY291bnQ6IDJ9KVxyXG4gICAgICAgICAgICBkYXRhLnB1c2goe25hbWU6IFwic3RvbmVcIiwgY291bnQ6IDV9KVxyXG4gICAgICAgICAgICB0aXAgPSBcIkxhYiBmb3VuZGF0aW9uXCJcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSAnYnVpbGRMYWInOlxyXG4gICAgICAgICAgICBkYXRhLnB1c2goe25hbWU6IFwibGFiXCIsIGNvdW50OiAxfSlcclxuICAgICAgICAgICAgdGlwID0gXCJMYWIgYnVpbGRpbmdcIlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgcmV0Ll9yZXN1bHQgPSB7dG9vbDogXCJzdGFja0FycmF5XCIsIHRpcCwgZGF0YX1cclxufVxyXG5UZWNoQmxvY2suX190b29sdGlwcy5JZ29yX29wZXJhdGlvbiA9IFwidGVjaEJsb2NrLnRvb2xUaXBzXCJcclxuVGVjaEJsb2NrLl9fdG9vbHRpcHMuQ0NfdXRpbGl0eSA9IFwidGVjaEJsb2NrLnRvb2xUaXBzXCJcclxuVGVjaEJsb2NrLnRpY2sgPSAob2JqLCB0aWNrRGF0YSwgSWdvcikgPT4ge1xyXG4gICAgbGV0IHJlc2VhcmNoID0gSWdvci5nZXROYW1lZE9iamVjdCgncmVzZWFyY2gnKS5wcm9ncmVzc2luZ1xyXG4gICAgaWYoIXJlc2VhcmNoKSByZXR1cm5cclxuICAgIGlmKE51bWJlci5pc05hTihvYmoucmVzZWFyY2hfdGlja3MpIHx8IG9iai5yZXNlYXJjaF90aWNrcz09PW51bGwpIHtcclxuICAgICAgICBsZXQgY29zdCA9IHJlc2VhcmNoLmNvc3QuaW5ncmVkaWVudHMubWFwKChbbmFtZSwgcXR5XSk9PiB7cmV0dXJuIHtuYW1lLCBjb3VudDpxdHl9fSlcclxuICAgICAgICBsZXQgY2FuQ29uc3VtZSA9IElnb3IucHJvY2Vzc1RFTVAob2JqLmJ1ZmZlcnMuaW4sIFwiaW52ZW50b3J5LmNvbnN1bWVcIiwge2l0ZW1TdGFja3M6IGNvc3QsIG11bHRpOiBvYmouYnVpbHR9KVxyXG4gICAgICAgIG9iai5yZXNlYXJjaF90aW1lID0gcmVzZWFyY2guY29zdC50aW1lICogSWdvci5nZXRTdGF0aWMoXCJjb25maWcuVElDS1NfUEVSX1NFQ09ORFwiKSAqIG9iai5yZXNlYXJjaF9zcGVlZFxyXG4gICAgICAgIGlmKCFjYW5Db25zdW1lKSB7XHJcbiAgICAgICAgICAgIG9iai5yZXNlYXJjaF9jb25zdW1lZCA9IDBcclxuICAgICAgICAgICAgb2JqLnJlc2VhcmNoX3RpY2tzID0gb2JqLnJlc2VhcmNoX3RpbWUgKiAwLjFcclxuICAgICAgICAgICAgb2JqLnN0YWxsZWQgPSB0cnVlXHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBvYmouc3RhbGxlZCA9IGZhbHNlXHJcbiAgICAgICAgb2JqLnJlc2VhcmNoX3RpY2tzID0gb2JqLnJlc2VhcmNoX3RpbWVcclxuICAgICAgICBvYmoucmVzZWFyY2hfY29uc3VtZWQgPSBjYW5Db25zdW1lXHJcbiAgICB9IGVsc2UgaWYob2JqLnJlc2VhcmNoX3RpY2tzKSB7XHJcbiAgICAgICAgLS1vYmoucmVzZWFyY2hfdGlja3NcclxuICAgIH0gZWxzZSBpZihvYmoucmVzZWFyY2hfdGlja3M8PTApIHtcclxuICAgICAgICBpZihvYmoucmVzZWFyY2hfY29uc3VtZWQpIHtcclxuICAgICAgICAgICAgbGV0IHJldCA9IElnb3IucHJvY2Vzc1RFTVAocmVzZWFyY2gsIFwicmVzZWFyY2gudXBkYXRlXCIsIHtjb3VudDogb2JqLnJlc2VhcmNoX2NvbnN1bWVkLCBtZTogb2JqLiRfaWR9KVxyXG4gICAgICAgICAgICBsZXQgY29zdCA9IHJlc2VhcmNoLmNvc3QuaW5ncmVkaWVudHMubWFwKChbbmFtZSwgcXR5XSk9PiB7cmV0dXJuIHtuYW1lLCBjb3VudDpxdHl9fSlcclxuICAgICAgICAgICAgSWdvci5wcm9jZXNzVEVNUChvYmouYnVmZmVycy5pbiwgXCJpbnZlbnRvcnkuYWRkXCIsIHtpdGVtU3RhY2tzOiBjb3N0LCBmb3JjZTogdHJ1ZSwgbXVsdGk6IHJldH0pXHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBvYmoucmVzZWFyY2hfdGlja3MgPSBOYU5cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbklnb3JKcy5kZWZpbmVPYmooXCJUZWNoQmxvY2tcIiwgVGVjaEJsb2NrLk5ldywgVGVjaEJsb2NrKSJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXpCQTtBQUNBO0FBMEJBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7Ozs7QUFHQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUdBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFKQTtBQUNBO0FBS0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTs7Ozs7Ozs7QUFTQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSkE7QUFNQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBbEJBO0FBQ0E7QUFtQkE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBREE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUlBOzs7O0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBWEE7QUFDQTtBQVlBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///v3/l\n");

/***/ })

}]);